//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/avatar/GroupAvatarChangeActor.java
//

#include "IOSClass.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "im/actor/core/api/ApiAvatar.h"
#include "im/actor/core/api/ApiFileLocation.h"
#include "im/actor/core/api/ApiGroupOutPeer.h"
#include "im/actor/core/api/base/SeqUpdate.h"
#include "im/actor/core/api/rpc/RequestEditGroupAvatar.h"
#include "im/actor/core/api/rpc/RequestRemoveGroupAvatar.h"
#include "im/actor/core/api/rpc/ResponseEditGroupAvatar.h"
#include "im/actor/core/api/rpc/ResponseSeqDate.h"
#include "im/actor/core/api/updates/UpdateGroupAvatarChanged.h"
#include "im/actor/core/entity/FileReference.h"
#include "im/actor/core/entity/Group.h"
#include "im/actor/core/modules/ModuleContext.h"
#include "im/actor/core/modules/Updates.h"
#include "im/actor/core/modules/internal/FilesModule.h"
#include "im/actor/core/modules/internal/GroupsModule.h"
#include "im/actor/core/modules/internal/ProfileModule.h"
#include "im/actor/core/modules/internal/avatar/GroupAvatarChangeActor.h"
#include "im/actor/core/modules/internal/file/UploadManager.h"
#include "im/actor/core/modules/updates/internal/ExecuteAfter.h"
#include "im/actor/core/modules/utils/ModuleActor.h"
#include "im/actor/core/modules/utils/RandomUtils.h"
#include "im/actor/core/network/RpcCallback.h"
#include "im/actor/core/network/RpcException.h"
#include "im/actor/core/viewmodel/AvatarUploadState.h"
#include "im/actor/core/viewmodel/GroupAvatarVM.h"
#include "im/actor/core/viewmodel/OwnAvatarVM.h"
#include "im/actor/runtime/actors/Actor.h"
#include "im/actor/runtime/actors/ActorRef.h"
#include "im/actor/runtime/mvvm/ValueModel.h"
#include "im/actor/runtime/storage/KeyValueEngine.h"
#include "java/lang/Integer.h"
#include "java/lang/Long.h"
#include "java/lang/Runnable.h"
#include "java/util/HashMap.h"

#pragma clang diagnostic push
#pragma GCC diagnostic ignored "-Wdeprecated-declarations"

@interface ACGroupAvatarChangeActor () {
 @public
  JavaUtilHashMap *currentTasks_;
  JavaUtilHashMap *tasksMap_;
}

@end

J2OBJC_FIELD_SETTER(ACGroupAvatarChangeActor, currentTasks_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(ACGroupAvatarChangeActor, tasksMap_, JavaUtilHashMap *)

@interface ACGroupAvatarChangeActor_AvatarChanged () {
 @public
  jint gid_;
  jlong rid_;
}

@end

@interface ACGroupAvatarChangeActor_ChangeAvatar () {
 @public
  jint gid_;
  NSString *descriptor_;
}

@end

J2OBJC_FIELD_SETTER(ACGroupAvatarChangeActor_ChangeAvatar, descriptor_, NSString *)

@interface ACGroupAvatarChangeActor_RemoveAvatar () {
 @public
  jint gid_;
}

@end

@interface ACGroupAvatarChangeActor_$1 : NSObject < ACRpcCallback > {
 @public
  ACGroupAvatarChangeActor *this$0_;
  jint val$gid_;
  jlong val$rid_;
}

- (void)onResult:(ARResponseEditGroupAvatar *)response;

- (void)onError:(ACRpcException *)e;

- (instancetype)initWithACGroupAvatarChangeActor:(ACGroupAvatarChangeActor *)outer$
                                         withInt:(jint)capture$0
                                        withLong:(jlong)capture$1;

@end

J2OBJC_EMPTY_STATIC_INIT(ACGroupAvatarChangeActor_$1)

J2OBJC_FIELD_SETTER(ACGroupAvatarChangeActor_$1, this$0_, ACGroupAvatarChangeActor *)

__attribute__((unused)) static void ACGroupAvatarChangeActor_$1_initWithACGroupAvatarChangeActor_withInt_withLong_(ACGroupAvatarChangeActor_$1 *self, ACGroupAvatarChangeActor *outer$, jint capture$0, jlong capture$1);

__attribute__((unused)) static ACGroupAvatarChangeActor_$1 *new_ACGroupAvatarChangeActor_$1_initWithACGroupAvatarChangeActor_withInt_withLong_(ACGroupAvatarChangeActor *outer$, jint capture$0, jlong capture$1) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ACGroupAvatarChangeActor_$1)

@interface ACGroupAvatarChangeActor_$1_$1 : NSObject < JavaLangRunnable > {
 @public
  ACGroupAvatarChangeActor_$1 *this$0_;
}

- (void)run;

- (instancetype)initWithACGroupAvatarChangeActor_$1:(ACGroupAvatarChangeActor_$1 *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(ACGroupAvatarChangeActor_$1_$1)

J2OBJC_FIELD_SETTER(ACGroupAvatarChangeActor_$1_$1, this$0_, ACGroupAvatarChangeActor_$1 *)

__attribute__((unused)) static void ACGroupAvatarChangeActor_$1_$1_initWithACGroupAvatarChangeActor_$1_(ACGroupAvatarChangeActor_$1_$1 *self, ACGroupAvatarChangeActor_$1 *outer$);

__attribute__((unused)) static ACGroupAvatarChangeActor_$1_$1 *new_ACGroupAvatarChangeActor_$1_$1_initWithACGroupAvatarChangeActor_$1_(ACGroupAvatarChangeActor_$1 *outer$) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ACGroupAvatarChangeActor_$1_$1)

@interface ACGroupAvatarChangeActor_$2 : NSObject < ACRpcCallback > {
 @public
  ACGroupAvatarChangeActor *this$0_;
  jint val$gid_;
  jlong val$rid_;
}

- (void)onResult:(ARResponseSeqDate *)response;

- (void)onError:(ACRpcException *)e;

- (instancetype)initWithACGroupAvatarChangeActor:(ACGroupAvatarChangeActor *)outer$
                                         withInt:(jint)capture$0
                                        withLong:(jlong)capture$1;

@end

J2OBJC_EMPTY_STATIC_INIT(ACGroupAvatarChangeActor_$2)

J2OBJC_FIELD_SETTER(ACGroupAvatarChangeActor_$2, this$0_, ACGroupAvatarChangeActor *)

__attribute__((unused)) static void ACGroupAvatarChangeActor_$2_initWithACGroupAvatarChangeActor_withInt_withLong_(ACGroupAvatarChangeActor_$2 *self, ACGroupAvatarChangeActor *outer$, jint capture$0, jlong capture$1);

__attribute__((unused)) static ACGroupAvatarChangeActor_$2 *new_ACGroupAvatarChangeActor_$2_initWithACGroupAvatarChangeActor_withInt_withLong_(ACGroupAvatarChangeActor *outer$, jint capture$0, jlong capture$1) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ACGroupAvatarChangeActor_$2)

@interface ACGroupAvatarChangeActor_$2_$1 : NSObject < JavaLangRunnable > {
 @public
  ACGroupAvatarChangeActor_$2 *this$0_;
}

- (void)run;

- (instancetype)initWithACGroupAvatarChangeActor_$2:(ACGroupAvatarChangeActor_$2 *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(ACGroupAvatarChangeActor_$2_$1)

J2OBJC_FIELD_SETTER(ACGroupAvatarChangeActor_$2_$1, this$0_, ACGroupAvatarChangeActor_$2 *)

__attribute__((unused)) static void ACGroupAvatarChangeActor_$2_$1_initWithACGroupAvatarChangeActor_$2_(ACGroupAvatarChangeActor_$2_$1 *self, ACGroupAvatarChangeActor_$2 *outer$);

__attribute__((unused)) static ACGroupAvatarChangeActor_$2_$1 *new_ACGroupAvatarChangeActor_$2_$1_initWithACGroupAvatarChangeActor_$2_(ACGroupAvatarChangeActor_$2 *outer$) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ACGroupAvatarChangeActor_$2_$1)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/avatar/GroupAvatarChangeActor.java"


#line 28
@implementation ACGroupAvatarChangeActor


#line 33
- (instancetype)initWithACModuleContext:(id<ACModuleContext>)context {
  ACGroupAvatarChangeActor_initWithACModuleContext_(self, context);
  return self;
}


#line 37
- (void)changeAvatarWithInt:(jint)gid
               withNSString:(NSString *)descriptor {
  if ([((JavaUtilHashMap *) nil_chk(currentTasks_)) containsKeyWithId:JavaLangInteger_valueOfWithInt_(gid)]) {
    [((ACFilesModule *) nil_chk([((id<ACModuleContext>) nil_chk([self context])) getFilesModule])) cancelUploadWithLong:[((JavaLangLong *) nil_chk([currentTasks_ getWithId:JavaLangInteger_valueOfWithInt_(gid)])) longLongValue]];
    (void) [currentTasks_ removeWithId:JavaLangInteger_valueOfWithInt_(gid)];
  }
  jlong rid = ACRandomUtils_nextRid();
  (void) [currentTasks_ putWithId:JavaLangInteger_valueOfWithInt_(gid) withId:JavaLangLong_valueOfWithLong_(rid)];
  (void) [((JavaUtilHashMap *) nil_chk(tasksMap_)) putWithId:JavaLangLong_valueOfWithLong_(rid) withId:JavaLangInteger_valueOfWithInt_(gid)];
  
#line 46
  [((ARValueModel *) nil_chk([((ACGroupAvatarVM *) nil_chk([((ACGroupsModule *) nil_chk([((id<ACModuleContext>) nil_chk([self context])) getGroupsModule])) getAvatarVMWithInt:gid])) getUploadState])) changeWithValue:new_ACAvatarUploadState_initWithNSString_withBoolean_(descriptor, true)];
  [((ACFilesModule *) nil_chk([((id<ACModuleContext>) nil_chk([self context])) getFilesModule])) requestUploadWithLong:rid withNSString:descriptor withNSString:@"avatar.jpg" withARActorRef:[self self__]];
}


#line 50
- (void)uploadCompletedWithLong:(jlong)rid
            withACFileReference:(ACFileReference *)fileReference {
  if (![((JavaUtilHashMap *) nil_chk(tasksMap_)) containsKeyWithId:JavaLangLong_valueOfWithLong_(rid)]) {
    return;
  }
  
#line 55
  jint gid = [((JavaLangInteger *) nil_chk([tasksMap_ getWithId:JavaLangLong_valueOfWithLong_(rid)])) intValue];
  jlong accessHash = [((ACGroup *) nil_chk([self getGroupWithInt:gid])) getAccessHash];
  
#line 58
  if ([((JavaLangLong *) nil_chk([((JavaUtilHashMap *) nil_chk(currentTasks_)) getWithId:JavaLangInteger_valueOfWithInt_(gid)])) longLongValue] != rid) {
    return;
  }
  
#line 62
  [self requestWithACRequest:new_ARRequestEditGroupAvatar_initWithARApiGroupOutPeer_withLong_withARApiFileLocation_(new_ARApiGroupOutPeer_initWithInt_withLong_(gid, accessHash), rid, new_ARApiFileLocation_initWithLong_withLong_([((ACFileReference *) nil_chk(fileReference)) getFileId],
#line 63
  [fileReference getAccessHash])) withACRpcCallback:new_ACGroupAvatarChangeActor_$1_initWithACGroupAvatarChangeActor_withInt_withLong_(self, gid, rid)];
}


#line 99
- (void)avatarChangedWithInt:(jint)gid
                    withLong:(jlong)rid {
  if (![((JavaUtilHashMap *) nil_chk(currentTasks_)) containsKeyWithId:JavaLangInteger_valueOfWithInt_(gid)]) {
    return;
  }
  if ([((JavaLangLong *) nil_chk([currentTasks_ getWithId:JavaLangInteger_valueOfWithInt_(gid)])) longLongValue] != rid) {
    return;
  }
  (void) [currentTasks_ removeWithId:JavaLangInteger_valueOfWithInt_(gid)];
  [((ARValueModel *) nil_chk([((ACGroupAvatarVM *) nil_chk([((ACGroupsModule *) nil_chk([((id<ACModuleContext>) nil_chk([self context])) getGroupsModule])) getAvatarVMWithInt:gid])) getUploadState])) changeWithValue:new_ACAvatarUploadState_initWithNSString_withBoolean_(nil, false)];
}


#line 110
- (void)uploadErrorWithLong:(jlong)rid {
  if (![((JavaUtilHashMap *) nil_chk(tasksMap_)) containsKeyWithId:JavaLangLong_valueOfWithLong_(rid)]) {
    return;
  }
  jint gid = [((JavaLangInteger *) nil_chk([tasksMap_ getWithId:JavaLangLong_valueOfWithLong_(rid)])) intValue];
  if ([((JavaLangLong *) nil_chk([((JavaUtilHashMap *) nil_chk(currentTasks_)) getWithId:JavaLangInteger_valueOfWithInt_(gid)])) longLongValue] != rid) {
    return;
  }
  (void) [currentTasks_ removeWithId:JavaLangInteger_valueOfWithInt_(gid)];
  (void) [tasksMap_ removeWithId:JavaLangLong_valueOfWithLong_(rid)];
  
#line 121
  [((ARValueModel *) nil_chk([((ACGroupAvatarVM *) nil_chk([((ACGroupsModule *) nil_chk([((id<ACModuleContext>) nil_chk([self context])) getGroupsModule])) getAvatarVMWithInt:gid])) getUploadState])) changeWithValue:new_ACAvatarUploadState_initWithNSString_withBoolean_(nil, false)];
}


#line 124
- (void)removeAvatarWithInt:(jint)gid {
  if ([((JavaUtilHashMap *) nil_chk(currentTasks_)) containsKeyWithId:JavaLangInteger_valueOfWithInt_(gid)]) {
    [((ACFilesModule *) nil_chk([((id<ACModuleContext>) nil_chk([self context])) getFilesModule])) cancelUploadWithLong:[((JavaLangLong *) nil_chk([currentTasks_ getWithId:JavaLangInteger_valueOfWithInt_(gid)])) longLongValue]];
    (void) [currentTasks_ removeWithId:JavaLangInteger_valueOfWithInt_(gid)];
  }
  jlong rid = ACRandomUtils_nextRid();
  (void) [currentTasks_ putWithId:JavaLangInteger_valueOfWithInt_(gid) withId:JavaLangLong_valueOfWithLong_(rid)];
  (void) [((JavaUtilHashMap *) nil_chk(tasksMap_)) putWithId:JavaLangLong_valueOfWithLong_(rid) withId:JavaLangInteger_valueOfWithInt_(gid)];
  
#line 133
  ACGroup *group = [((id<ARKeyValueEngine>) nil_chk([((ACGroupsModule *) nil_chk([((id<ACModuleContext>) nil_chk([self context])) getGroupsModule])) getGroups])) getValueWithKey:gid];
  
#line 135
  ARApiGroupOutPeer *outPeer = new_ARApiGroupOutPeer_initWithInt_withLong_(gid, [((ACGroup *) nil_chk(group)) getAccessHash]);
  
#line 137
  [((ARValueModel *) nil_chk([((ACOwnAvatarVM *) nil_chk([((ACProfileModule *) nil_chk([((id<ACModuleContext>) nil_chk([self context])) getProfileModule])) getOwnAvatarVM])) getUploadState])) changeWithValue:new_ACAvatarUploadState_initWithNSString_withBoolean_(nil, true)];
  [self requestWithACRequest:new_ARRequestRemoveGroupAvatar_initWithARApiGroupOutPeer_withLong_(outPeer, rid) withACRpcCallback:new_ACGroupAvatarChangeActor_$2_initWithACGroupAvatarChangeActor_withInt_withLong_(self, gid, rid)];
}


#line 178
- (void)onReceiveWithId:(id)message {
  if ([message isKindOfClass:[ACGroupAvatarChangeActor_ChangeAvatar class]]) {
    ACGroupAvatarChangeActor_ChangeAvatar *changeAvatar = (ACGroupAvatarChangeActor_ChangeAvatar *) check_class_cast(message, [ACGroupAvatarChangeActor_ChangeAvatar class]);
    [self changeAvatarWithInt:[((ACGroupAvatarChangeActor_ChangeAvatar *) nil_chk(changeAvatar)) getGid] withNSString:[changeAvatar getDescriptor]];
  }
  else
#line 182
  if ([message isKindOfClass:[ACUploadManager_UploadCompleted class]]) {
    ACUploadManager_UploadCompleted *uploadCompleted = (ACUploadManager_UploadCompleted *) check_class_cast(message, [ACUploadManager_UploadCompleted class]);
    [self uploadCompletedWithLong:[((ACUploadManager_UploadCompleted *) nil_chk(uploadCompleted)) getRid] withACFileReference:[uploadCompleted getFileReference]];
  }
  else
#line 185
  if ([message isKindOfClass:[ACGroupAvatarChangeActor_AvatarChanged class]]) {
    ACGroupAvatarChangeActor_AvatarChanged *avatarChanged = (ACGroupAvatarChangeActor_AvatarChanged *) check_class_cast(message, [ACGroupAvatarChangeActor_AvatarChanged class]);
    [self avatarChangedWithInt:[((ACGroupAvatarChangeActor_AvatarChanged *) nil_chk(avatarChanged)) getGid] withLong:[avatarChanged getRid]];
  }
  else
#line 188
  if ([message isKindOfClass:[ACUploadManager_UploadError class]]) {
    ACUploadManager_UploadError *uploadError = (ACUploadManager_UploadError *) check_class_cast(message, [ACUploadManager_UploadError class]);
    [self uploadErrorWithLong:[((ACUploadManager_UploadError *) nil_chk(uploadError)) getRid]];
  }
  else
#line 191
  if ([message isKindOfClass:[ACGroupAvatarChangeActor_RemoveAvatar class]]) {
    ACGroupAvatarChangeActor_RemoveAvatar *removeAvatar = (ACGroupAvatarChangeActor_RemoveAvatar *) check_class_cast(message, [ACGroupAvatarChangeActor_RemoveAvatar class]);
    [self removeAvatarWithInt:[((ACGroupAvatarChangeActor_RemoveAvatar *) nil_chk(removeAvatar)) getGid]];
  }
  else {
    
#line 195
    [self dropWithId:message];
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithACModuleContext:", "GroupAvatarChangeActor", NULL, 0x1, NULL, NULL },
    { "changeAvatarWithInt:withNSString:", "changeAvatar", "V", 0x1, NULL, NULL },
    { "uploadCompletedWithLong:withACFileReference:", "uploadCompleted", "V", 0x1, NULL, NULL },
    { "avatarChangedWithInt:withLong:", "avatarChanged", "V", 0x1, NULL, NULL },
    { "uploadErrorWithLong:", "uploadError", "V", 0x1, NULL, NULL },
    { "removeAvatarWithInt:", "removeAvatar", "V", 0x1, NULL, NULL },
    { "onReceiveWithId:", "onReceive", "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "currentTasks_", NULL, 0x2, "Ljava.util.HashMap;", NULL, "Ljava/util/HashMap<Ljava/lang/Integer;Ljava/lang/Long;>;", .constantValue.asLong = 0 },
    { "tasksMap_", NULL, 0x2, "Ljava.util.HashMap;", NULL, "Ljava/util/HashMap<Ljava/lang/Long;Ljava/lang/Integer;>;", .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lim.actor.core.modules.internal.avatar.GroupAvatarChangeActor$AvatarChanged;", "Lim.actor.core.modules.internal.avatar.GroupAvatarChangeActor$ChangeAvatar;", "Lim.actor.core.modules.internal.avatar.GroupAvatarChangeActor$RemoveAvatar;"};
  static const J2ObjcClassInfo _ACGroupAvatarChangeActor = { 2, "GroupAvatarChangeActor", "im.actor.core.modules.internal.avatar", NULL, 0x1, 7, methods, 2, fields, 0, NULL, 3, inner_classes, NULL, NULL };
  return &_ACGroupAvatarChangeActor;
}

@end


#line 33
void ACGroupAvatarChangeActor_initWithACModuleContext_(ACGroupAvatarChangeActor *self, id<ACModuleContext> context) {
  (void) ACModuleActor_initWithACModuleContext_(self, context);
  self->currentTasks_ = new_JavaUtilHashMap_init();
  self->tasksMap_ = new_JavaUtilHashMap_init();
}


#line 33
ACGroupAvatarChangeActor *new_ACGroupAvatarChangeActor_initWithACModuleContext_(id<ACModuleContext> context) {
  ACGroupAvatarChangeActor *self = [ACGroupAvatarChangeActor alloc];
  ACGroupAvatarChangeActor_initWithACModuleContext_(self, context);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACGroupAvatarChangeActor)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/avatar/GroupAvatarChangeActor.java"


#line 199
@implementation ACGroupAvatarChangeActor_AvatarChanged


#line 203
- (instancetype)initWithInt:(jint)gid
                   withLong:(jlong)rid {
  ACGroupAvatarChangeActor_AvatarChanged_initWithInt_withLong_(self, gid, rid);
  return self;
}


#line 208
- (jint)getGid {
  return gid_;
}

- (jlong)getRid {
  return rid_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withLong:", "AvatarChanged", NULL, 0x1, NULL, NULL },
    { "getGid", NULL, "I", 0x1, NULL, NULL },
    { "getRid", NULL, "J", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "gid_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "rid_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ACGroupAvatarChangeActor_AvatarChanged = { 2, "AvatarChanged", "im.actor.core.modules.internal.avatar", "GroupAvatarChangeActor", 0x9, 3, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACGroupAvatarChangeActor_AvatarChanged;
}

@end


#line 203
void ACGroupAvatarChangeActor_AvatarChanged_initWithInt_withLong_(ACGroupAvatarChangeActor_AvatarChanged *self, jint gid, jlong rid) {
  (void) NSObject_init(self);
  
#line 204
  self->gid_ = gid;
  self->rid_ = rid;
}


#line 203
ACGroupAvatarChangeActor_AvatarChanged *new_ACGroupAvatarChangeActor_AvatarChanged_initWithInt_withLong_(jint gid, jlong rid) {
  ACGroupAvatarChangeActor_AvatarChanged *self = [ACGroupAvatarChangeActor_AvatarChanged alloc];
  ACGroupAvatarChangeActor_AvatarChanged_initWithInt_withLong_(self, gid, rid);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACGroupAvatarChangeActor_AvatarChanged)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/avatar/GroupAvatarChangeActor.java"


#line 217
@implementation ACGroupAvatarChangeActor_ChangeAvatar


#line 221
- (instancetype)initWithInt:(jint)gid
               withNSString:(NSString *)descriptor {
  ACGroupAvatarChangeActor_ChangeAvatar_initWithInt_withNSString_(self, gid, descriptor);
  return self;
}


#line 226
- (jint)getGid {
  return gid_;
}

- (NSString *)getDescriptor {
  return descriptor_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withNSString:", "ChangeAvatar", NULL, 0x1, NULL, NULL },
    { "getGid", NULL, "I", 0x1, NULL, NULL },
    { "getDescriptor", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "gid_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "descriptor_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ACGroupAvatarChangeActor_ChangeAvatar = { 2, "ChangeAvatar", "im.actor.core.modules.internal.avatar", "GroupAvatarChangeActor", 0x9, 3, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACGroupAvatarChangeActor_ChangeAvatar;
}

@end


#line 221
void ACGroupAvatarChangeActor_ChangeAvatar_initWithInt_withNSString_(ACGroupAvatarChangeActor_ChangeAvatar *self, jint gid, NSString *descriptor) {
  (void) NSObject_init(self);
  
#line 222
  self->gid_ = gid;
  self->descriptor_ = descriptor;
}


#line 221
ACGroupAvatarChangeActor_ChangeAvatar *new_ACGroupAvatarChangeActor_ChangeAvatar_initWithInt_withNSString_(jint gid, NSString *descriptor) {
  ACGroupAvatarChangeActor_ChangeAvatar *self = [ACGroupAvatarChangeActor_ChangeAvatar alloc];
  ACGroupAvatarChangeActor_ChangeAvatar_initWithInt_withNSString_(self, gid, descriptor);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACGroupAvatarChangeActor_ChangeAvatar)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/avatar/GroupAvatarChangeActor.java"


#line 235
@implementation ACGroupAvatarChangeActor_RemoveAvatar


#line 238
- (instancetype)initWithInt:(jint)gid {
  ACGroupAvatarChangeActor_RemoveAvatar_initWithInt_(self, gid);
  return self;
}


#line 242
- (jint)getGid {
  return gid_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:", "RemoveAvatar", NULL, 0x1, NULL, NULL },
    { "getGid", NULL, "I", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "gid_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ACGroupAvatarChangeActor_RemoveAvatar = { 2, "RemoveAvatar", "im.actor.core.modules.internal.avatar", "GroupAvatarChangeActor", 0x9, 2, methods, 1, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACGroupAvatarChangeActor_RemoveAvatar;
}

@end


#line 238
void ACGroupAvatarChangeActor_RemoveAvatar_initWithInt_(ACGroupAvatarChangeActor_RemoveAvatar *self, jint gid) {
  (void) NSObject_init(self);
  
#line 239
  self->gid_ = gid;
}


#line 238
ACGroupAvatarChangeActor_RemoveAvatar *new_ACGroupAvatarChangeActor_RemoveAvatar_initWithInt_(jint gid) {
  ACGroupAvatarChangeActor_RemoveAvatar *self = [ACGroupAvatarChangeActor_RemoveAvatar alloc];
  ACGroupAvatarChangeActor_RemoveAvatar_initWithInt_(self, gid);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACGroupAvatarChangeActor_RemoveAvatar)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/avatar/GroupAvatarChangeActor.java"

@implementation ACGroupAvatarChangeActor_$1


#line 66
- (void)onResult:(ARResponseEditGroupAvatar *)response {
  
#line 68
  [((ACUpdates *) nil_chk([this$0_ updates])) onUpdateReceivedWithId:new_ARSeqUpdate_initWithInt_withByteArray_withInt_withByteArray_([((ARResponseEditGroupAvatar *) nil_chk(response)) getSeq],
#line 69
  [response getState], ARUpdateGroupAvatarChanged_HEADER,
#line 70
  [new_ARUpdateGroupAvatarChanged_initWithInt_withLong_withInt_withARApiAvatar_withLong_(val$gid_, val$rid_, [this$0_ myUid],
#line 71
  [response getAvatar], [response getDate]) toByteArray])];
  
#line 74
  [((ACUpdates *) nil_chk([this$0_ updates])) onUpdateReceivedWithId:new_ACExecuteAfter_initWithInt_withJavaLangRunnable_([response getSeq], new_ACGroupAvatarChangeActor_$1_$1_initWithACGroupAvatarChangeActor_$1_(self))];
}


#line 83
- (void)onError:(ACRpcException *)e {
  if (![((JavaUtilHashMap *) nil_chk(this$0_->tasksMap_)) containsKeyWithId:JavaLangLong_valueOfWithLong_(val$rid_)]) {
    return;
  }
  jint gid = [((JavaLangInteger *) nil_chk([this$0_->tasksMap_ getWithId:JavaLangLong_valueOfWithLong_(val$rid_)])) intValue];
  if ([((JavaLangLong *) nil_chk([((JavaUtilHashMap *) nil_chk(this$0_->currentTasks_)) getWithId:JavaLangInteger_valueOfWithInt_(gid)])) longLongValue] != val$rid_) {
    return;
  }
  (void) [this$0_->currentTasks_ removeWithId:JavaLangInteger_valueOfWithInt_(gid)];
  (void) [this$0_->tasksMap_ removeWithId:JavaLangLong_valueOfWithLong_(val$rid_)];
  
#line 94
  [((ARValueModel *) nil_chk([((ACGroupAvatarVM *) nil_chk([((ACGroupsModule *) nil_chk([((id<ACModuleContext>) nil_chk([this$0_ context])) getGroupsModule])) getAvatarVMWithInt:gid])) getUploadState])) changeWithValue:new_ACAvatarUploadState_initWithNSString_withBoolean_(nil, false)];
}

- (instancetype)initWithACGroupAvatarChangeActor:(ACGroupAvatarChangeActor *)outer$
                                         withInt:(jint)capture$0
                                        withLong:(jlong)capture$1 {
  ACGroupAvatarChangeActor_$1_initWithACGroupAvatarChangeActor_withInt_withLong_(self, outer$, capture$0, capture$1);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "onResult:", "onResult", "V", 0x1, NULL, NULL },
    { "onError:", "onError", "V", 0x1, NULL, NULL },
    { "initWithACGroupAvatarChangeActor:withInt:withLong:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lim.actor.core.modules.internal.avatar.GroupAvatarChangeActor;", NULL, NULL, .constantValue.asLong = 0 },
    { "val$gid_", NULL, 0x1012, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "val$rid_", NULL, 0x1012, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "ACGroupAvatarChangeActor", "uploadCompletedWithLong:withACFileReference:" };
  static const J2ObjcClassInfo _ACGroupAvatarChangeActor_$1 = { 2, "", "im.actor.core.modules.internal.avatar", "GroupAvatarChangeActor", 0x8008, 3, methods, 3, fields, 0, NULL, 0, NULL, &enclosing_method, "Ljava/lang/Object;Lim/actor/core/network/RpcCallback<Lim/actor/core/api/rpc/ResponseEditGroupAvatar;>;" };
  return &_ACGroupAvatarChangeActor_$1;
}

@end

void ACGroupAvatarChangeActor_$1_initWithACGroupAvatarChangeActor_withInt_withLong_(ACGroupAvatarChangeActor_$1 *self, ACGroupAvatarChangeActor *outer$, jint capture$0, jlong capture$1) {
  self->this$0_ = outer$;
  self->val$gid_ = capture$0;
  self->val$rid_ = capture$1;
  (void) NSObject_init(self);
}

ACGroupAvatarChangeActor_$1 *new_ACGroupAvatarChangeActor_$1_initWithACGroupAvatarChangeActor_withInt_withLong_(ACGroupAvatarChangeActor *outer$, jint capture$0, jlong capture$1) {
  ACGroupAvatarChangeActor_$1 *self = [ACGroupAvatarChangeActor_$1 alloc];
  ACGroupAvatarChangeActor_$1_initWithACGroupAvatarChangeActor_withInt_withLong_(self, outer$, capture$0, capture$1);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACGroupAvatarChangeActor_$1)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/avatar/GroupAvatarChangeActor.java"

@implementation ACGroupAvatarChangeActor_$1_$1


#line 76
- (void)run {
  [((ARActorRef *) nil_chk([this$0_->this$0_ self__])) sendWithId:new_ACGroupAvatarChangeActor_AvatarChanged_initWithInt_withLong_(this$0_->val$gid_, this$0_->val$rid_)];
}

- (instancetype)initWithACGroupAvatarChangeActor_$1:(ACGroupAvatarChangeActor_$1 *)outer$ {
  ACGroupAvatarChangeActor_$1_$1_initWithACGroupAvatarChangeActor_$1_(self, outer$);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "run", NULL, "V", 0x1, NULL, NULL },
    { "initWithACGroupAvatarChangeActor_$1:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lim.actor.core.modules.internal.avatar.GroupAvatarChangeActor$1;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "ACGroupAvatarChangeActor_$1", "onResult:" };
  static const J2ObjcClassInfo _ACGroupAvatarChangeActor_$1_$1 = { 2, "", "im.actor.core.modules.internal.avatar", "GroupAvatarChangeActor$", 0x8008, 2, methods, 1, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_ACGroupAvatarChangeActor_$1_$1;
}

@end

void ACGroupAvatarChangeActor_$1_$1_initWithACGroupAvatarChangeActor_$1_(ACGroupAvatarChangeActor_$1_$1 *self, ACGroupAvatarChangeActor_$1 *outer$) {
  self->this$0_ = outer$;
  (void) NSObject_init(self);
}

ACGroupAvatarChangeActor_$1_$1 *new_ACGroupAvatarChangeActor_$1_$1_initWithACGroupAvatarChangeActor_$1_(ACGroupAvatarChangeActor_$1 *outer$) {
  ACGroupAvatarChangeActor_$1_$1 *self = [ACGroupAvatarChangeActor_$1_$1 alloc];
  ACGroupAvatarChangeActor_$1_$1_initWithACGroupAvatarChangeActor_$1_(self, outer$);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACGroupAvatarChangeActor_$1_$1)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/avatar/GroupAvatarChangeActor.java"

@implementation ACGroupAvatarChangeActor_$2


#line 140
- (void)onResult:(ARResponseSeqDate *)response {
  [((ACUpdates *) nil_chk([this$0_ updates])) onSeqUpdateReceivedWithInt:
#line 142
  [((ARResponseSeqDate *) nil_chk(response)) getSeq] withByteArray:
#line 143
  [response getState] withACUpdate:new_ARUpdateGroupAvatarChanged_initWithInt_withLong_withInt_withARApiAvatar_withLong_(val$gid_, val$rid_,
#line 147
  [this$0_ myUid],
#line 148
  nil,
#line 149
  [response getDate])];
  
#line 152
  [((ACUpdates *) nil_chk([this$0_ updates])) onUpdateReceivedWithId:new_ACExecuteAfter_initWithInt_withJavaLangRunnable_([response getSeq], new_ACGroupAvatarChangeActor_$2_$1_initWithACGroupAvatarChangeActor_$2_(self))];
}


#line 161
- (void)onError:(ACRpcException *)e {
  if (![((JavaUtilHashMap *) nil_chk(this$0_->tasksMap_)) containsKeyWithId:JavaLangLong_valueOfWithLong_(val$rid_)]) {
    return;
  }
  jint gid = [((JavaLangInteger *) nil_chk([this$0_->tasksMap_ getWithId:JavaLangLong_valueOfWithLong_(val$rid_)])) intValue];
  if ([((JavaLangLong *) nil_chk([((JavaUtilHashMap *) nil_chk(this$0_->currentTasks_)) getWithId:JavaLangInteger_valueOfWithInt_(gid)])) longLongValue] != val$rid_) {
    return;
  }
  (void) [this$0_->currentTasks_ removeWithId:JavaLangInteger_valueOfWithInt_(gid)];
  (void) [this$0_->tasksMap_ removeWithId:JavaLangLong_valueOfWithLong_(val$rid_)];
  
#line 172
  [((ARValueModel *) nil_chk([((ACGroupAvatarVM *) nil_chk([((ACGroupsModule *) nil_chk([((id<ACModuleContext>) nil_chk([this$0_ context])) getGroupsModule])) getAvatarVMWithInt:gid])) getUploadState])) changeWithValue:new_ACAvatarUploadState_initWithNSString_withBoolean_(nil, false)];
}

- (instancetype)initWithACGroupAvatarChangeActor:(ACGroupAvatarChangeActor *)outer$
                                         withInt:(jint)capture$0
                                        withLong:(jlong)capture$1 {
  ACGroupAvatarChangeActor_$2_initWithACGroupAvatarChangeActor_withInt_withLong_(self, outer$, capture$0, capture$1);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "onResult:", "onResult", "V", 0x1, NULL, NULL },
    { "onError:", "onError", "V", 0x1, NULL, NULL },
    { "initWithACGroupAvatarChangeActor:withInt:withLong:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lim.actor.core.modules.internal.avatar.GroupAvatarChangeActor;", NULL, NULL, .constantValue.asLong = 0 },
    { "val$gid_", NULL, 0x1012, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "val$rid_", NULL, 0x1012, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "ACGroupAvatarChangeActor", "removeAvatarWithInt:" };
  static const J2ObjcClassInfo _ACGroupAvatarChangeActor_$2 = { 2, "", "im.actor.core.modules.internal.avatar", "GroupAvatarChangeActor", 0x8008, 3, methods, 3, fields, 0, NULL, 0, NULL, &enclosing_method, "Ljava/lang/Object;Lim/actor/core/network/RpcCallback<Lim/actor/core/api/rpc/ResponseSeqDate;>;" };
  return &_ACGroupAvatarChangeActor_$2;
}

@end

void ACGroupAvatarChangeActor_$2_initWithACGroupAvatarChangeActor_withInt_withLong_(ACGroupAvatarChangeActor_$2 *self, ACGroupAvatarChangeActor *outer$, jint capture$0, jlong capture$1) {
  self->this$0_ = outer$;
  self->val$gid_ = capture$0;
  self->val$rid_ = capture$1;
  (void) NSObject_init(self);
}

ACGroupAvatarChangeActor_$2 *new_ACGroupAvatarChangeActor_$2_initWithACGroupAvatarChangeActor_withInt_withLong_(ACGroupAvatarChangeActor *outer$, jint capture$0, jlong capture$1) {
  ACGroupAvatarChangeActor_$2 *self = [ACGroupAvatarChangeActor_$2 alloc];
  ACGroupAvatarChangeActor_$2_initWithACGroupAvatarChangeActor_withInt_withLong_(self, outer$, capture$0, capture$1);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACGroupAvatarChangeActor_$2)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/avatar/GroupAvatarChangeActor.java"

@implementation ACGroupAvatarChangeActor_$2_$1


#line 154
- (void)run {
  [((ARActorRef *) nil_chk([this$0_->this$0_ self__])) sendWithId:new_ACGroupAvatarChangeActor_AvatarChanged_initWithInt_withLong_(this$0_->val$gid_, this$0_->val$rid_)];
}

- (instancetype)initWithACGroupAvatarChangeActor_$2:(ACGroupAvatarChangeActor_$2 *)outer$ {
  ACGroupAvatarChangeActor_$2_$1_initWithACGroupAvatarChangeActor_$2_(self, outer$);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "run", NULL, "V", 0x1, NULL, NULL },
    { "initWithACGroupAvatarChangeActor_$2:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lim.actor.core.modules.internal.avatar.GroupAvatarChangeActor$2;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "ACGroupAvatarChangeActor_$2", "onResult:" };
  static const J2ObjcClassInfo _ACGroupAvatarChangeActor_$2_$1 = { 2, "", "im.actor.core.modules.internal.avatar", "GroupAvatarChangeActor$", 0x8008, 2, methods, 1, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_ACGroupAvatarChangeActor_$2_$1;
}

@end

void ACGroupAvatarChangeActor_$2_$1_initWithACGroupAvatarChangeActor_$2_(ACGroupAvatarChangeActor_$2_$1 *self, ACGroupAvatarChangeActor_$2 *outer$) {
  self->this$0_ = outer$;
  (void) NSObject_init(self);
}

ACGroupAvatarChangeActor_$2_$1 *new_ACGroupAvatarChangeActor_$2_$1_initWithACGroupAvatarChangeActor_$2_(ACGroupAvatarChangeActor_$2 *outer$) {
  ACGroupAvatarChangeActor_$2_$1 *self = [ACGroupAvatarChangeActor_$2_$1 alloc];
  ACGroupAvatarChangeActor_$2_$1_initWithACGroupAvatarChangeActor_$2_(self, outer$);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACGroupAvatarChangeActor_$2_$1)

#pragma clang diagnostic pop
