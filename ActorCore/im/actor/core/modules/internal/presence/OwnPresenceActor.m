//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/OwnPresenceActor.java
//

#include "J2ObjC_source.h"
#include "im/actor/core/api/rpc/RequestSetOnline.h"
#include "im/actor/core/api/rpc/ResponseVoid.h"
#include "im/actor/core/modules/ModuleContext.h"
#include "im/actor/core/modules/Modules.h"
#include "im/actor/core/modules/events/AppVisibleChanged.h"
#include "im/actor/core/modules/internal/presence/OwnPresenceActor.h"
#include "im/actor/core/modules/utils/ModuleActor.h"
#include "im/actor/core/network/RpcCallback.h"
#include "im/actor/core/network/RpcException.h"
#include "im/actor/runtime/actors/Actor.h"
#include "im/actor/runtime/actors/ActorRef.h"
#include "im/actor/runtime/eventbus/Event.h"
#include "im/actor/runtime/eventbus/EventBus.h"

#pragma clang diagnostic push
#pragma GCC diagnostic ignored "-Wdeprecated-declarations"

#define ACOwnPresenceActor_RESEND_TIMEOUT 60000
#define ACOwnPresenceActor_TIMEOUT 90000

@interface ACOwnPresenceActor () {
 @public
  jboolean isVisible_;
}

- (void)onAppVisible;

- (void)onAppHidden;

- (void)performOnline;

@end

J2OBJC_STATIC_FIELD_GETTER(ACOwnPresenceActor, RESEND_TIMEOUT, jint)

J2OBJC_STATIC_FIELD_GETTER(ACOwnPresenceActor, TIMEOUT, jint)

__attribute__((unused)) static void ACOwnPresenceActor_onAppVisible(ACOwnPresenceActor *self);

__attribute__((unused)) static void ACOwnPresenceActor_onAppHidden(ACOwnPresenceActor *self);

__attribute__((unused)) static void ACOwnPresenceActor_performOnline(ACOwnPresenceActor *self);

@interface ACOwnPresenceActor_OnAppVisible : NSObject

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(ACOwnPresenceActor_OnAppVisible)

__attribute__((unused)) static void ACOwnPresenceActor_OnAppVisible_init(ACOwnPresenceActor_OnAppVisible *self);

__attribute__((unused)) static ACOwnPresenceActor_OnAppVisible *new_ACOwnPresenceActor_OnAppVisible_init() NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ACOwnPresenceActor_OnAppVisible)

@interface ACOwnPresenceActor_OnAppHidden : NSObject

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(ACOwnPresenceActor_OnAppHidden)

__attribute__((unused)) static void ACOwnPresenceActor_OnAppHidden_init(ACOwnPresenceActor_OnAppHidden *self);

__attribute__((unused)) static ACOwnPresenceActor_OnAppHidden *new_ACOwnPresenceActor_OnAppHidden_init() NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ACOwnPresenceActor_OnAppHidden)

@interface ACOwnPresenceActor_PerformOnline : NSObject

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(ACOwnPresenceActor_PerformOnline)

__attribute__((unused)) static void ACOwnPresenceActor_PerformOnline_init(ACOwnPresenceActor_PerformOnline *self);

__attribute__((unused)) static ACOwnPresenceActor_PerformOnline *new_ACOwnPresenceActor_PerformOnline_init() NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ACOwnPresenceActor_PerformOnline)

@interface ACOwnPresenceActor_$1 : NSObject < ACRpcCallback >

- (void)onResult:(ARResponseVoid *)response;

- (void)onError:(ACRpcException *)e;

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(ACOwnPresenceActor_$1)

__attribute__((unused)) static void ACOwnPresenceActor_$1_init(ACOwnPresenceActor_$1 *self);

__attribute__((unused)) static ACOwnPresenceActor_$1 *new_ACOwnPresenceActor_$1_init() NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ACOwnPresenceActor_$1)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/OwnPresenceActor.java"


#line 21
@implementation ACOwnPresenceActor


#line 28
- (instancetype)initWithACModules:(ACModules *)messenger {
  ACOwnPresenceActor_initWithACModules_(self, messenger);
  return self;
}

- (void)preStart {
  [((ImActorRuntimeEventbusEventBus *) nil_chk([((id<ACModuleContext>) nil_chk([self context])) getEvents])) subscribeWithImActorRuntimeEventbusBusSubscriber:self withNSString:ImActorCoreModulesEventsAppVisibleChanged_EVENT_];
}

- (void)onAppVisible {
  ACOwnPresenceActor_onAppVisible(self);
}


#line 42
- (void)onAppHidden {
  ACOwnPresenceActor_onAppHidden(self);
}


#line 47
- (void)performOnline {
  ACOwnPresenceActor_performOnline(self);
}


#line 68
- (void)onReceiveWithId:(id)message {
  if ([message isKindOfClass:[ACOwnPresenceActor_OnAppVisible class]]) {
    ACOwnPresenceActor_onAppVisible(self);
  }
  else
#line 71
  if ([message isKindOfClass:[ACOwnPresenceActor_OnAppHidden class]]) {
    ACOwnPresenceActor_onAppHidden(self);
  }
  else
#line 73
  if ([message isKindOfClass:[ACOwnPresenceActor_PerformOnline class]]) {
    ACOwnPresenceActor_performOnline(self);
  }
  else {
    
#line 76
    [self dropWithId:message];
  }
}


#line 81
- (void)onBusEventWithImActorRuntimeEventbusEvent:(ImActorRuntimeEventbusEvent *)event {
  if ([event isKindOfClass:[ImActorCoreModulesEventsAppVisibleChanged class]]) {
    ImActorCoreModulesEventsAppVisibleChanged *visibleChanged = (ImActorCoreModulesEventsAppVisibleChanged *) check_class_cast(event, [ImActorCoreModulesEventsAppVisibleChanged class]);
    if ([((ImActorCoreModulesEventsAppVisibleChanged *) nil_chk(visibleChanged)) isVisible]) {
      [((ARActorRef *) nil_chk([self self__])) sendWithId:new_ACOwnPresenceActor_OnAppVisible_init()];
    }
    else {
      
#line 87
      [((ARActorRef *) nil_chk([self self__])) sendWithId:new_ACOwnPresenceActor_OnAppHidden_init()];
    }
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithACModules:", "OwnPresenceActor", NULL, 0x1, NULL, NULL },
    { "preStart", NULL, "V", 0x1, NULL, NULL },
    { "onAppVisible", NULL, "V", 0x2, NULL, NULL },
    { "onAppHidden", NULL, "V", 0x2, NULL, NULL },
    { "performOnline", NULL, "V", 0x2, NULL, NULL },
    { "onReceiveWithId:", "onReceive", "V", 0x1, NULL, NULL },
    { "onBusEventWithImActorRuntimeEventbusEvent:", "onBusEvent", "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "RESEND_TIMEOUT", "RESEND_TIMEOUT", 0x1a, "I", NULL, NULL, .constantValue.asInt = ACOwnPresenceActor_RESEND_TIMEOUT },
    { "TIMEOUT", "TIMEOUT", 0x1a, "I", NULL, NULL, .constantValue.asInt = ACOwnPresenceActor_TIMEOUT },
    { "isVisible_", NULL, 0x2, "Z", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lim.actor.core.modules.internal.presence.OwnPresenceActor$OnAppVisible;", "Lim.actor.core.modules.internal.presence.OwnPresenceActor$OnAppHidden;", "Lim.actor.core.modules.internal.presence.OwnPresenceActor$PerformOnline;"};
  static const J2ObjcClassInfo _ACOwnPresenceActor = { 2, "OwnPresenceActor", "im.actor.core.modules.internal.presence", NULL, 0x1, 7, methods, 3, fields, 0, NULL, 3, inner_classes, NULL, NULL };
  return &_ACOwnPresenceActor;
}

@end


#line 28
void ACOwnPresenceActor_initWithACModules_(ACOwnPresenceActor *self, ACModules *messenger) {
  (void) ACModuleActor_initWithACModuleContext_(self, messenger);
  self->isVisible_ =
#line 26
  false;
}


#line 28
ACOwnPresenceActor *new_ACOwnPresenceActor_initWithACModules_(ACModules *messenger) {
  ACOwnPresenceActor *self = [ACOwnPresenceActor alloc];
  ACOwnPresenceActor_initWithACModules_(self, messenger);
  return self;
}


#line 37
void ACOwnPresenceActor_onAppVisible(ACOwnPresenceActor *self) {
  self->isVisible_ = true;
  [((ARActorRef *) nil_chk([self self__])) sendOnceWithId:new_ACOwnPresenceActor_PerformOnline_init()];
}

void ACOwnPresenceActor_onAppHidden(ACOwnPresenceActor *self) {
  self->isVisible_ = false;
  [((ARActorRef *) nil_chk([self self__])) sendOnceWithId:new_ACOwnPresenceActor_PerformOnline_init()];
}

void ACOwnPresenceActor_performOnline(ACOwnPresenceActor *self) {
  [self requestWithACRequest:new_ARRequestSetOnline_initWithBoolean_withLong_(self->isVisible_, ACOwnPresenceActor_TIMEOUT) withACRpcCallback:new_ACOwnPresenceActor_$1_init()];
  
#line 60
  if (self->isVisible_) {
    [((ARActorRef *) nil_chk([self self__])) sendOnceWithId:new_ACOwnPresenceActor_PerformOnline_init() withLong:ACOwnPresenceActor_RESEND_TIMEOUT];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACOwnPresenceActor)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/OwnPresenceActor.java"


#line 92
@implementation ACOwnPresenceActor_OnAppVisible

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ACOwnPresenceActor_OnAppVisible_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", NULL, NULL, 0x2, NULL, NULL },
  };
  static const J2ObjcClassInfo _ACOwnPresenceActor_OnAppVisible = { 2, "OnAppVisible", "im.actor.core.modules.internal.presence", "OwnPresenceActor", 0xa, 1, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACOwnPresenceActor_OnAppVisible;
}

@end

void ACOwnPresenceActor_OnAppVisible_init(ACOwnPresenceActor_OnAppVisible *self) {
  (void) NSObject_init(self);
}

ACOwnPresenceActor_OnAppVisible *new_ACOwnPresenceActor_OnAppVisible_init() {
  ACOwnPresenceActor_OnAppVisible *self = [ACOwnPresenceActor_OnAppVisible alloc];
  ACOwnPresenceActor_OnAppVisible_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACOwnPresenceActor_OnAppVisible)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/OwnPresenceActor.java"


#line 96
@implementation ACOwnPresenceActor_OnAppHidden

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ACOwnPresenceActor_OnAppHidden_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", NULL, NULL, 0x2, NULL, NULL },
  };
  static const J2ObjcClassInfo _ACOwnPresenceActor_OnAppHidden = { 2, "OnAppHidden", "im.actor.core.modules.internal.presence", "OwnPresenceActor", 0xa, 1, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACOwnPresenceActor_OnAppHidden;
}

@end

void ACOwnPresenceActor_OnAppHidden_init(ACOwnPresenceActor_OnAppHidden *self) {
  (void) NSObject_init(self);
}

ACOwnPresenceActor_OnAppHidden *new_ACOwnPresenceActor_OnAppHidden_init() {
  ACOwnPresenceActor_OnAppHidden *self = [ACOwnPresenceActor_OnAppHidden alloc];
  ACOwnPresenceActor_OnAppHidden_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACOwnPresenceActor_OnAppHidden)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/OwnPresenceActor.java"


#line 100
@implementation ACOwnPresenceActor_PerformOnline

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ACOwnPresenceActor_PerformOnline_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", NULL, NULL, 0x2, NULL, NULL },
  };
  static const J2ObjcClassInfo _ACOwnPresenceActor_PerformOnline = { 2, "PerformOnline", "im.actor.core.modules.internal.presence", "OwnPresenceActor", 0xa, 1, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACOwnPresenceActor_PerformOnline;
}

@end

void ACOwnPresenceActor_PerformOnline_init(ACOwnPresenceActor_PerformOnline *self) {
  (void) NSObject_init(self);
}

ACOwnPresenceActor_PerformOnline *new_ACOwnPresenceActor_PerformOnline_init() {
  ACOwnPresenceActor_PerformOnline *self = [ACOwnPresenceActor_PerformOnline alloc];
  ACOwnPresenceActor_PerformOnline_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACOwnPresenceActor_PerformOnline)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/OwnPresenceActor.java"

@implementation ACOwnPresenceActor_$1


#line 51
- (void)onResult:(ARResponseVoid *)response {
}


#line 56
- (void)onError:(ACRpcException *)e {
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ACOwnPresenceActor_$1_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "onResult:", "onResult", "V", 0x1, NULL, NULL },
    { "onError:", "onError", "V", 0x1, NULL, NULL },
    { "init", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "ACOwnPresenceActor", "performOnline" };
  static const J2ObjcClassInfo _ACOwnPresenceActor_$1 = { 2, "", "im.actor.core.modules.internal.presence", "OwnPresenceActor", 0x8008, 3, methods, 0, NULL, 0, NULL, 0, NULL, &enclosing_method, "Ljava/lang/Object;Lim/actor/core/network/RpcCallback<Lim/actor/core/api/rpc/ResponseVoid;>;" };
  return &_ACOwnPresenceActor_$1;
}

@end

void ACOwnPresenceActor_$1_init(ACOwnPresenceActor_$1 *self) {
  (void) NSObject_init(self);
}

ACOwnPresenceActor_$1 *new_ACOwnPresenceActor_$1_init() {
  ACOwnPresenceActor_$1 *self = [ACOwnPresenceActor_$1 alloc];
  ACOwnPresenceActor_$1_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACOwnPresenceActor_$1)

#pragma clang diagnostic pop
