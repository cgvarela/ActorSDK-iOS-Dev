//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/PresenceActor.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "im/actor/core/api/ApiGroupOutPeer.h"
#include "im/actor/core/api/ApiUserOutPeer.h"
#include "im/actor/core/api/rpc/RequestSubscribeToGroupOnline.h"
#include "im/actor/core/api/rpc/RequestSubscribeToOnline.h"
#include "im/actor/core/entity/Group.h"
#include "im/actor/core/entity/Peer.h"
#include "im/actor/core/entity/PeerType.h"
#include "im/actor/core/entity/User.h"
#include "im/actor/core/modules/ModuleContext.h"
#include "im/actor/core/modules/events/NewSessionCreated.h"
#include "im/actor/core/modules/events/PeerChatOpened.h"
#include "im/actor/core/modules/events/PeerInfoOpened.h"
#include "im/actor/core/modules/events/UserVisible.h"
#include "im/actor/core/modules/internal/presence/PresenceActor.h"
#include "im/actor/core/modules/utils/ModuleActor.h"
#include "im/actor/core/viewmodel/GroupVM.h"
#include "im/actor/core/viewmodel/UserPresence.h"
#include "im/actor/core/viewmodel/UserVM.h"
#include "im/actor/core/viewmodel/generics/ValueModelUserPresence.h"
#include "im/actor/runtime/Log.h"
#include "im/actor/runtime/actors/Actor.h"
#include "im/actor/runtime/actors/ActorCreator.h"
#include "im/actor/runtime/actors/ActorRef.h"
#include "im/actor/runtime/actors/ActorSystem.h"
#include "im/actor/runtime/actors/MailboxCreator.h"
#include "im/actor/runtime/actors/Props.h"
#include "im/actor/runtime/actors/mailbox/Envelope.h"
#include "im/actor/runtime/actors/mailbox/Mailbox.h"
#include "im/actor/runtime/actors/mailbox/MailboxesQueue.h"
#include "im/actor/runtime/eventbus/Event.h"
#include "im/actor/runtime/eventbus/EventBus.h"
#include "im/actor/runtime/mvvm/ValueModel.h"
#include "java/lang/Integer.h"
#include "java/lang/Long.h"
#include "java/util/ArrayList.h"
#include "java/util/HashMap.h"
#include "java/util/HashSet.h"
#include "java/util/List.h"

#pragma clang diagnostic push
#pragma GCC diagnostic ignored "-Wdeprecated-declarations"

#define ACPresenceActor_ONLINE_TIMEOUT 300000
#define ACPresenceActor_FOREVER 86400000LL

@interface ACPresenceActor () {
 @public
  JavaUtilHashMap *lastUidState_;
  JavaUtilHashMap *lastGidState_;
  JavaUtilHashSet *uids_;
  JavaUtilHashSet *gids_;
}

- (void)onUserOnlineWithInt:(jint)uid
                   withLong:(jlong)updateDate;

- (void)onUserOfflineWithInt:(jint)uid
                    withLong:(jlong)updateDate;

- (void)onUserLastSeenWithInt:(jint)uid
                      withInt:(jint)date
                     withLong:(jlong)updateDate;

- (void)onUserGoesOfflineWithInt:(jint)uid
                         withInt:(jint)date
                        withLong:(jlong)updateDate;

- (void)onGroupOnlineWithInt:(jint)gid
                     withInt:(jint)count
                    withLong:(jlong)updateDate;

- (void)subscribeWithACPeer:(ACPeer *)peer;

- (void)onNewSessionCreated;

@end

J2OBJC_FIELD_SETTER(ACPresenceActor, lastUidState_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(ACPresenceActor, lastGidState_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(ACPresenceActor, uids_, JavaUtilHashSet *)
J2OBJC_FIELD_SETTER(ACPresenceActor, gids_, JavaUtilHashSet *)

J2OBJC_STATIC_FIELD_GETTER(ACPresenceActor, ONLINE_TIMEOUT, jint)

J2OBJC_STATIC_FIELD_GETTER(ACPresenceActor, FOREVER, jlong)

static NSString *ACPresenceActor_TAG_ = @"PresenceActor";
J2OBJC_STATIC_FIELD_GETTER(ACPresenceActor, TAG_, NSString *)

__attribute__((unused)) static void ACPresenceActor_onUserOnlineWithInt_withLong_(ACPresenceActor *self, jint uid, jlong updateDate);

__attribute__((unused)) static void ACPresenceActor_onUserOfflineWithInt_withLong_(ACPresenceActor *self, jint uid, jlong updateDate);

__attribute__((unused)) static void ACPresenceActor_onUserLastSeenWithInt_withInt_withLong_(ACPresenceActor *self, jint uid, jint date, jlong updateDate);

__attribute__((unused)) static void ACPresenceActor_onUserGoesOfflineWithInt_withInt_withLong_(ACPresenceActor *self, jint uid, jint date, jlong updateDate);

__attribute__((unused)) static void ACPresenceActor_onGroupOnlineWithInt_withInt_withLong_(ACPresenceActor *self, jint gid, jint count, jlong updateDate);

__attribute__((unused)) static void ACPresenceActor_subscribeWithACPeer_(ACPresenceActor *self, ACPeer *peer);

__attribute__((unused)) static void ACPresenceActor_onNewSessionCreated(ACPresenceActor *self);

@interface ACPresenceActor_UserOnline () {
 @public
  jint uid_;
  jlong updateDate_;
}

@end

@interface ACPresenceActor_UserOffline () {
 @public
  jint uid_;
  jlong updateDate_;
}

@end

@interface ACPresenceActor_UserLastSeen () {
 @public
  jint uid_;
  jint date_;
  jlong updateDate_;
}

@end

@interface ACPresenceActor_GroupOnline () {
 @public
  jint gid_;
  jint count_;
  jlong updateDate_;
}

@end

@interface ACPresenceActor_OnlineUserTimeout : NSObject {
 @public
  jint uid_;
  jint date_;
  jlong updateDate_;
}

- (instancetype)initWithInt:(jint)uid
                    withInt:(jint)date
                   withLong:(jlong)updateDate;

- (jint)getUid;

- (jint)getDate;

- (jlong)getUpdateDate;

@end

J2OBJC_EMPTY_STATIC_INIT(ACPresenceActor_OnlineUserTimeout)

__attribute__((unused)) static void ACPresenceActor_OnlineUserTimeout_initWithInt_withInt_withLong_(ACPresenceActor_OnlineUserTimeout *self, jint uid, jint date, jlong updateDate);

__attribute__((unused)) static ACPresenceActor_OnlineUserTimeout *new_ACPresenceActor_OnlineUserTimeout_initWithInt_withInt_withLong_(jint uid, jint date, jlong updateDate) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ACPresenceActor_OnlineUserTimeout)

@interface ACPresenceActor_Subscribe () {
 @public
  ACPeer *peer_;
}

@end

J2OBJC_FIELD_SETTER(ACPresenceActor_Subscribe, peer_, ACPeer *)

@interface ACPresenceActor_$1 : NSObject < ARActorCreator > {
 @public
  id<ACModuleContext> val$messenger_;
}

- (ACPresenceActor *)create;

- (instancetype)initWithACModuleContext:(id<ACModuleContext>)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(ACPresenceActor_$1)

J2OBJC_FIELD_SETTER(ACPresenceActor_$1, val$messenger_, id<ACModuleContext>)

__attribute__((unused)) static void ACPresenceActor_$1_initWithACModuleContext_(ACPresenceActor_$1 *self, id<ACModuleContext> capture$0);

__attribute__((unused)) static ACPresenceActor_$1 *new_ACPresenceActor_$1_initWithACModuleContext_(id<ACModuleContext> capture$0) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ACPresenceActor_$1)

@interface ACPresenceActor_$2 : NSObject < ARMailboxCreator >

- (ARMailbox *)createMailboxWithARMailboxesQueue:(ARMailboxesQueue *)queue;

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(ACPresenceActor_$2)

__attribute__((unused)) static void ACPresenceActor_$2_init(ACPresenceActor_$2 *self);

__attribute__((unused)) static ACPresenceActor_$2 *new_ACPresenceActor_$2_init() NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ACPresenceActor_$2)

@interface ACPresenceActor_$2_$1 : ARMailbox

- (jboolean)isEqualEnvelopeWithAREnvelope:(AREnvelope *)a
                           withAREnvelope:(AREnvelope *)b;

- (instancetype)initWithARMailboxesQueue:(ARMailboxesQueue *)arg$0;

@end

J2OBJC_EMPTY_STATIC_INIT(ACPresenceActor_$2_$1)

__attribute__((unused)) static void ACPresenceActor_$2_$1_initWithARMailboxesQueue_(ACPresenceActor_$2_$1 *self, ARMailboxesQueue *arg$0);

__attribute__((unused)) static ACPresenceActor_$2_$1 *new_ACPresenceActor_$2_$1_initWithARMailboxesQueue_(ARMailboxesQueue *arg$0) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ACPresenceActor_$2_$1)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/PresenceActor.java"


#line 43
@implementation ACPresenceActor

+ (ARActorRef *)createWithACModuleContext:(id<ACModuleContext>)messenger {
  return ACPresenceActor_createWithACModuleContext_(messenger);
}


#line 79
- (instancetype)initWithACModuleContext:(id<ACModuleContext>)messenger {
  ACPresenceActor_initWithACModuleContext_(self, messenger);
  return self;
}

- (void)preStart {
  [((ImActorRuntimeEventbusEventBus *) nil_chk([((id<ACModuleContext>) nil_chk([self context])) getEvents])) subscribeWithImActorRuntimeEventbusBusSubscriber:self withNSString:ImActorCoreModulesEventsNewSessionCreated_EVENT_];
  [((ImActorRuntimeEventbusEventBus *) nil_chk([((id<ACModuleContext>) nil_chk([self context])) getEvents])) subscribeWithImActorRuntimeEventbusBusSubscriber:self withNSString:ImActorCoreModulesEventsPeerChatOpened_EVENT_];
  [((ImActorRuntimeEventbusEventBus *) nil_chk([((id<ACModuleContext>) nil_chk([self context])) getEvents])) subscribeWithImActorRuntimeEventbusBusSubscriber:self withNSString:ImActorCoreModulesEventsPeerInfoOpened_EVENT_];
  [((ImActorRuntimeEventbusEventBus *) nil_chk([((id<ACModuleContext>) nil_chk([self context])) getEvents])) subscribeWithImActorRuntimeEventbusBusSubscriber:self withNSString:ImActorCoreModulesEventsUserVisible_EVENT_];
}


#line 92
- (void)onUserOnlineWithInt:(jint)uid
                   withLong:(jlong)updateDate {
  ACPresenceActor_onUserOnlineWithInt_withLong_(self, uid, updateDate);
}


#line 112
- (void)onUserOfflineWithInt:(jint)uid
                    withLong:(jlong)updateDate {
  ACPresenceActor_onUserOfflineWithInt_withLong_(self, uid, updateDate);
}


#line 132
- (void)onUserLastSeenWithInt:(jint)uid
                      withInt:(jint)date
                     withLong:(jlong)updateDate {
  ACPresenceActor_onUserLastSeenWithInt_withInt_withLong_(self, uid, date, updateDate);
}


#line 150
- (void)onUserGoesOfflineWithInt:(jint)uid
                         withInt:(jint)date
                        withLong:(jlong)updateDate {
  ACPresenceActor_onUserGoesOfflineWithInt_withInt_withLong_(self, uid, date, updateDate);
}


#line 169
- (void)onGroupOnlineWithInt:(jint)gid
                     withInt:(jint)count
                    withLong:(jlong)updateDate {
  ACPresenceActor_onGroupOnlineWithInt_withInt_withLong_(self, gid, count, updateDate);
}


#line 185
- (void)subscribeWithACPeer:(ACPeer *)peer {
  ACPresenceActor_subscribeWithACPeer_(self, peer);
}


#line 222
- (void)onNewSessionCreated {
  ACPresenceActor_onNewSessionCreated(self);
}


#line 254
- (void)onReceiveWithId:(id)message {
  if ([message isKindOfClass:[ACPresenceActor_UserOnline class]]) {
    ACPresenceActor_UserOnline *online = (ACPresenceActor_UserOnline *) check_class_cast(message, [ACPresenceActor_UserOnline class]);
    ACPresenceActor_onUserOnlineWithInt_withLong_(self, [((ACPresenceActor_UserOnline *) nil_chk(online)) getUid], [online getUpdateDate]);
  }
  else
#line 258
  if ([message isKindOfClass:[ACPresenceActor_UserOffline class]]) {
    ACPresenceActor_UserOffline *offline = (ACPresenceActor_UserOffline *) check_class_cast(message, [ACPresenceActor_UserOffline class]);
    ACPresenceActor_onUserOfflineWithInt_withLong_(self, [((ACPresenceActor_UserOffline *) nil_chk(offline)) getUid], [offline getUpdateDate]);
  }
  else
#line 261
  if ([message isKindOfClass:[ACPresenceActor_UserLastSeen class]]) {
    ACPresenceActor_UserLastSeen *lastSeen = (ACPresenceActor_UserLastSeen *) check_class_cast(message, [ACPresenceActor_UserLastSeen class]);
    ACPresenceActor_onUserLastSeenWithInt_withInt_withLong_(self, [((ACPresenceActor_UserLastSeen *) nil_chk(lastSeen)) getUid], [lastSeen getDate], [lastSeen getUpdateDate]);
  }
  else
#line 264
  if ([message isKindOfClass:[ACPresenceActor_GroupOnline class]]) {
    ACPresenceActor_GroupOnline *groupOnline = (ACPresenceActor_GroupOnline *) check_class_cast(message, [ACPresenceActor_GroupOnline class]);
    ACPresenceActor_onGroupOnlineWithInt_withInt_withLong_(self, [((ACPresenceActor_GroupOnline *) nil_chk(groupOnline)) getGid], [groupOnline getCount], [groupOnline getUpdateDate]);
  }
  else
#line 267
  if ([message isKindOfClass:[ACPresenceActor_Subscribe class]]) {
    ACPresenceActor_subscribeWithACPeer_(self, [((ACPresenceActor_Subscribe *) nil_chk(((ACPresenceActor_Subscribe *) check_class_cast(message, [ACPresenceActor_Subscribe class])))) getPeer]);
  }
  else
#line 269
  if ([message isKindOfClass:[ACPresenceActor_SessionCreated class]]) {
    ACPresenceActor_onNewSessionCreated(self);
  }
  else
#line 271
  if ([message isKindOfClass:[ACPresenceActor_OnlineUserTimeout class]]) {
    ACPresenceActor_OnlineUserTimeout *timeout = (ACPresenceActor_OnlineUserTimeout *) check_class_cast(message, [ACPresenceActor_OnlineUserTimeout class]);
    ACPresenceActor_onUserGoesOfflineWithInt_withInt_withLong_(self, [((ACPresenceActor_OnlineUserTimeout *) nil_chk(timeout)) getUid], [timeout getDate], [timeout getUpdateDate]);
  }
  else {
    
#line 275
    [self dropWithId:message];
  }
}


#line 280
- (void)onBusEventWithImActorRuntimeEventbusEvent:(ImActorRuntimeEventbusEvent *)event {
  if ([event isKindOfClass:[ImActorCoreModulesEventsNewSessionCreated class]]) {
    [((ARActorRef *) nil_chk([self self__])) sendWithId:new_ACPresenceActor_SessionCreated_init()];
  }
  else
#line 283
  if ([event isKindOfClass:[ImActorCoreModulesEventsPeerChatOpened class]]) {
    [((ARActorRef *) nil_chk([self self__])) sendWithId:new_ACPresenceActor_Subscribe_initWithACPeer_([((ImActorCoreModulesEventsPeerChatOpened *) nil_chk(((ImActorCoreModulesEventsPeerChatOpened *) check_class_cast(event, [ImActorCoreModulesEventsPeerChatOpened class])))) getPeer])];
  }
  else
#line 285
  if ([event isKindOfClass:[ImActorCoreModulesEventsPeerInfoOpened class]]) {
    [((ARActorRef *) nil_chk([self self__])) sendWithId:new_ACPresenceActor_Subscribe_initWithACPeer_([((ImActorCoreModulesEventsPeerInfoOpened *) nil_chk(((ImActorCoreModulesEventsPeerInfoOpened *) check_class_cast(event, [ImActorCoreModulesEventsPeerInfoOpened class])))) getPeer])];
  }
  else
#line 287
  if ([event isKindOfClass:[ImActorCoreModulesEventsUserVisible class]]) {
    [((ARActorRef *) nil_chk([self self__])) sendWithId:new_ACPresenceActor_Subscribe_initWithACPeer_(ACPeer_userWithInt_([((ImActorCoreModulesEventsUserVisible *) nil_chk(((ImActorCoreModulesEventsUserVisible *) check_class_cast(event, [ImActorCoreModulesEventsUserVisible class])))) getUid]))];
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "createWithACModuleContext:", "create", "Lim.actor.runtime.actors.ActorRef;", 0x9, NULL, NULL },
    { "initWithACModuleContext:", "PresenceActor", NULL, 0x1, NULL, NULL },
    { "preStart", NULL, "V", 0x1, NULL, NULL },
    { "onUserOnlineWithInt:withLong:", "onUserOnline", "V", 0x2, NULL, NULL },
    { "onUserOfflineWithInt:withLong:", "onUserOffline", "V", 0x2, NULL, NULL },
    { "onUserLastSeenWithInt:withInt:withLong:", "onUserLastSeen", "V", 0x2, NULL, NULL },
    { "onUserGoesOfflineWithInt:withInt:withLong:", "onUserGoesOffline", "V", 0x2, NULL, NULL },
    { "onGroupOnlineWithInt:withInt:withLong:", "onGroupOnline", "V", 0x2, NULL, NULL },
    { "subscribeWithACPeer:", "subscribe", "V", 0x2, NULL, NULL },
    { "onNewSessionCreated", NULL, "V", 0x2, NULL, NULL },
    { "onReceiveWithId:", "onReceive", "V", 0x1, NULL, NULL },
    { "onBusEventWithImActorRuntimeEventbusEvent:", "onBusEvent", "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "ONLINE_TIMEOUT", "ONLINE_TIMEOUT", 0x1a, "I", NULL, NULL, .constantValue.asInt = ACPresenceActor_ONLINE_TIMEOUT },
    { "FOREVER", "FOREVER", 0x1a, "J", NULL, NULL, .constantValue.asLong = ACPresenceActor_FOREVER },
    { "TAG_", NULL, 0x1a, "Ljava.lang.String;", &ACPresenceActor_TAG_, NULL, .constantValue.asLong = 0 },
    { "lastUidState_", NULL, 0x2, "Ljava.util.HashMap;", NULL, "Ljava/util/HashMap<Ljava/lang/Integer;Ljava/lang/Long;>;", .constantValue.asLong = 0 },
    { "lastGidState_", NULL, 0x2, "Ljava.util.HashMap;", NULL, "Ljava/util/HashMap<Ljava/lang/Integer;Ljava/lang/Long;>;", .constantValue.asLong = 0 },
    { "uids_", NULL, 0x2, "Ljava.util.HashSet;", NULL, "Ljava/util/HashSet<Ljava/lang/Integer;>;", .constantValue.asLong = 0 },
    { "gids_", NULL, 0x2, "Ljava.util.HashSet;", NULL, "Ljava/util/HashSet<Ljava/lang/Integer;>;", .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lim.actor.core.modules.internal.presence.PresenceActor$UserOnline;", "Lim.actor.core.modules.internal.presence.PresenceActor$UserOffline;", "Lim.actor.core.modules.internal.presence.PresenceActor$UserLastSeen;", "Lim.actor.core.modules.internal.presence.PresenceActor$GroupOnline;", "Lim.actor.core.modules.internal.presence.PresenceActor$OnlineUserTimeout;", "Lim.actor.core.modules.internal.presence.PresenceActor$Subscribe;", "Lim.actor.core.modules.internal.presence.PresenceActor$SessionCreated;"};
  static const J2ObjcClassInfo _ACPresenceActor = { 2, "PresenceActor", "im.actor.core.modules.internal.presence", NULL, 0x1, 12, methods, 7, fields, 0, NULL, 7, inner_classes, NULL, NULL };
  return &_ACPresenceActor;
}

@end


#line 45
ARActorRef *ACPresenceActor_createWithACModuleContext_(id<ACModuleContext> messenger) {
  ACPresenceActor_initialize();
  
#line 46
  return [((ARActorSystem *) nil_chk(ARActorSystem_system())) actorOfWithARProps:ARProps_createWithIOSClass_withARActorCreator_withARMailboxCreator_(ACPresenceActor_class_(), new_ACPresenceActor_$1_initWithACModuleContext_(messenger), new_ACPresenceActor_$2_init()) withNSString:
#line 66
  @"actor/presence/users"];
}


#line 79
void ACPresenceActor_initWithACModuleContext_(ACPresenceActor *self, id<ACModuleContext> messenger) {
  (void) ACModuleActor_initWithACModuleContext_(self, messenger);
  self->lastUidState_ = new_JavaUtilHashMap_init();
  self->lastGidState_ = new_JavaUtilHashMap_init();
  self->uids_ = new_JavaUtilHashSet_init();
  self->gids_ = new_JavaUtilHashSet_init();
}


#line 79
ACPresenceActor *new_ACPresenceActor_initWithACModuleContext_(id<ACModuleContext> messenger) {
  ACPresenceActor *self = [ACPresenceActor alloc];
  ACPresenceActor_initWithACModuleContext_(self, messenger);
  return self;
}


#line 92
void ACPresenceActor_onUserOnlineWithInt_withLong_(ACPresenceActor *self, jint uid, jlong updateDate) {
  ARLog_dWithNSString_withNSString_(ACPresenceActor_TAG_, JreStrcat("$I$J", @"onUserOnline  #", uid, @" at ", updateDate));
  if ([((JavaUtilHashMap *) nil_chk(self->lastUidState_)) containsKeyWithId:JavaLangInteger_valueOfWithInt_(uid)] && [((JavaLangLong *) nil_chk([self->lastUidState_ getWithId:JavaLangInteger_valueOfWithInt_(uid)])) longLongValue] >= updateDate) {
    ARLog_dWithNSString_withNSString_(ACPresenceActor_TAG_, @"onUserOnline:ignored - too old");
    return;
  }
  (void) [self->lastUidState_ putWithId:JavaLangInteger_valueOfWithInt_(uid) withId:JavaLangLong_valueOfWithLong_(updateDate)];
  ARLog_dWithNSString_withNSString_(ACPresenceActor_TAG_, @"onUserOnline:updated");
  
#line 101
  ACUserVM *vm = [self getUserVMWithInt:uid];
  if (vm != nil) {
    [((ACValueModelUserPresence *) nil_chk([vm getPresenceModel])) changeWithValue:new_ACUserPresence_initWithACUserPresence_StateEnum_(JreLoadStatic(ACUserPresence_StateEnum, ONLINE))];
  }
  
#line 107
  [((ARActorRef *) nil_chk([self self__])) sendOnceWithId:new_ACPresenceActor_OnlineUserTimeout_initWithInt_withInt_withLong_(uid, (jint) ((updateDate + ACPresenceActor_ONLINE_TIMEOUT) / 1000LL),
#line 108
  updateDate + ACPresenceActor_ONLINE_TIMEOUT) withLong:ACPresenceActor_ONLINE_TIMEOUT];
}


#line 112
void ACPresenceActor_onUserOfflineWithInt_withLong_(ACPresenceActor *self, jint uid, jlong updateDate) {
  ARLog_dWithNSString_withNSString_(ACPresenceActor_TAG_, JreStrcat("$I$J", @"onUserOffline  #", uid, @" at ", updateDate));
  if ([((JavaUtilHashMap *) nil_chk(self->lastUidState_)) containsKeyWithId:JavaLangInteger_valueOfWithInt_(uid)] && [((JavaLangLong *) nil_chk([self->lastUidState_ getWithId:JavaLangInteger_valueOfWithInt_(uid)])) longLongValue] >= updateDate) {
    ARLog_dWithNSString_withNSString_(ACPresenceActor_TAG_, @"onUserOffline:ignored - too old");
    return;
  }
  (void) [self->lastUidState_ putWithId:JavaLangInteger_valueOfWithInt_(uid) withId:JavaLangLong_valueOfWithLong_(updateDate)];
  ARLog_dWithNSString_withNSString_(ACPresenceActor_TAG_, @"onUserOffline:updated");
  
#line 121
  ACUserVM *vm = [self getUserVMWithInt:uid];
  if (vm != nil) {
    [((ACValueModelUserPresence *) nil_chk([vm getPresenceModel])) changeWithValue:new_ACUserPresence_initWithACUserPresence_StateEnum_(JreLoadStatic(ACUserPresence_StateEnum, OFFLINE))];
  }
  
#line 127
  [((ARActorRef *) nil_chk([self self__])) sendOnceWithId:new_ACPresenceActor_OnlineUserTimeout_initWithInt_withInt_withLong_(uid, (jint) ((updateDate + ACPresenceActor_ONLINE_TIMEOUT) / 1000LL),
#line 128
  updateDate + ACPresenceActor_ONLINE_TIMEOUT) withLong:ACPresenceActor_FOREVER];
}


#line 132
void ACPresenceActor_onUserLastSeenWithInt_withInt_withLong_(ACPresenceActor *self, jint uid, jint date, jlong updateDate) {
  ARLog_dWithNSString_withNSString_(ACPresenceActor_TAG_, JreStrcat("$I$I$J", @"onUserLastSeen  #", uid, @" at ", date, @" at ", updateDate));
  if ([((JavaUtilHashMap *) nil_chk(self->lastUidState_)) containsKeyWithId:JavaLangInteger_valueOfWithInt_(uid)] && [((JavaLangLong *) nil_chk([self->lastUidState_ getWithId:JavaLangInteger_valueOfWithInt_(uid)])) longLongValue] >= updateDate) {
    ARLog_dWithNSString_withNSString_(ACPresenceActor_TAG_, @"onUserLastSeen:ignored - too old");
    return;
  }
  (void) [self->lastUidState_ putWithId:JavaLangInteger_valueOfWithInt_(uid) withId:JavaLangLong_valueOfWithLong_(updateDate)];
  ARLog_dWithNSString_withNSString_(ACPresenceActor_TAG_, @"onUserLastSeen:updated");
  
#line 141
  ACUserVM *vm = [self getUserVMWithInt:uid];
  if (vm != nil) {
    [((ACValueModelUserPresence *) nil_chk([vm getPresenceModel])) changeWithValue:new_ACUserPresence_initWithACUserPresence_StateEnum_withLong_(JreLoadStatic(ACUserPresence_StateEnum, OFFLINE), date)];
  }
  
#line 147
  [((ARActorRef *) nil_chk([self self__])) sendOnceWithId:new_ACPresenceActor_OnlineUserTimeout_initWithInt_withInt_withLong_(uid, 0, 0) withLong:ACPresenceActor_FOREVER];
}


#line 150
void ACPresenceActor_onUserGoesOfflineWithInt_withInt_withLong_(ACPresenceActor *self, jint uid, jint date, jlong updateDate) {
  ARLog_dWithNSString_withNSString_(ACPresenceActor_TAG_, JreStrcat("$I$I$J", @"onUserGoesOffline  #", uid, @" at ", date, @" at ", updateDate));
  if ([((JavaUtilHashMap *) nil_chk(self->lastUidState_)) containsKeyWithId:JavaLangInteger_valueOfWithInt_(uid)] && [((JavaLangLong *) nil_chk([self->lastUidState_ getWithId:JavaLangInteger_valueOfWithInt_(uid)])) longLongValue] >= updateDate) {
    ARLog_dWithNSString_withNSString_(ACPresenceActor_TAG_, @"onUserGoesOffline:ignored - too old");
    return;
  }
  (void) [self->lastUidState_ putWithId:JavaLangInteger_valueOfWithInt_(uid) withId:JavaLangLong_valueOfWithLong_(updateDate)];
  ARLog_dWithNSString_withNSString_(ACPresenceActor_TAG_, @"onUserGoesOffline:updated");
  
#line 159
  ACUserVM *vm = [self getUserVMWithInt:uid];
  if (vm != nil) {
    [((ACValueModelUserPresence *) nil_chk([vm getPresenceModel])) changeWithValue:new_ACUserPresence_initWithACUserPresence_StateEnum_withLong_(JreLoadStatic(ACUserPresence_StateEnum, OFFLINE), date)];
  }
  
#line 165
  [((ARActorRef *) nil_chk([self self__])) sendOnceWithId:new_ACPresenceActor_OnlineUserTimeout_initWithInt_withInt_withLong_(uid, 0, 0) withLong:ACPresenceActor_FOREVER];
}

void ACPresenceActor_onGroupOnlineWithInt_withInt_withLong_(ACPresenceActor *self, jint gid, jint count, jlong updateDate) {
  ARLog_dWithNSString_withNSString_(ACPresenceActor_TAG_, JreStrcat("$ICI$J", @"onGroupOnline  #", gid, ' ', count, @" at ", updateDate));
  if ([((JavaUtilHashMap *) nil_chk(self->lastGidState_)) containsKeyWithId:JavaLangInteger_valueOfWithInt_(gid)] && [((JavaLangLong *) nil_chk([self->lastGidState_ getWithId:JavaLangInteger_valueOfWithInt_(gid)])) longLongValue] >= updateDate) {
    ARLog_dWithNSString_withNSString_(ACPresenceActor_TAG_, @"onGroupOnline:ignored - too old");
    return;
  }
  (void) [self->lastGidState_ putWithId:JavaLangInteger_valueOfWithInt_(gid) withId:JavaLangLong_valueOfWithLong_(updateDate)];
  ARLog_dWithNSString_withNSString_(ACPresenceActor_TAG_, @"onGroupOnline:updated");
  
#line 178
  ACGroupVM *vm = [self getGroupVMWithInt:gid];
  if (vm != nil) {
    [((ARValueModel *) nil_chk([vm getPresenceModel])) changeWithValue:JavaLangInteger_valueOfWithInt_(count)];
  }
}

void ACPresenceActor_subscribeWithACPeer_(ACPresenceActor *self, ACPeer *peer) {
  if ([((ACPeer *) nil_chk(peer)) getPeerType] == JreLoadStatic(ACPeerTypeEnum, PRIVATE)) {
    
#line 188
    if ([((JavaUtilHashSet *) nil_chk(self->uids_)) containsWithId:JavaLangInteger_valueOfWithInt_([peer getPeerId])]) {
      return;
    }
    
#line 192
    ACUser *user = [self getUserWithInt:[peer getPeerId]];
    if (user == nil) {
      return;
    }
    
#line 198
    [self->uids_ addWithId:JavaLangInteger_valueOfWithInt_([((ACUser *) nil_chk(user)) getUid])];
    id<JavaUtilList> peers = new_JavaUtilArrayList_init();
    [peers addWithId:new_ARApiUserOutPeer_initWithInt_withLong_([user getUid], [user getAccessHash])];
    [self requestWithACRequest:new_ARRequestSubscribeToOnline_initWithJavaUtilList_(peers)];
  }
  else
#line 202
  if ([peer getPeerType] == JreLoadStatic(ACPeerTypeEnum, GROUP)) {
    
#line 204
    if ([((JavaUtilHashSet *) nil_chk(self->gids_)) containsWithId:JavaLangInteger_valueOfWithInt_([peer getPeerId])]) {
      return;
    }
    
#line 208
    ACGroup *group = [self getGroupWithInt:[peer getPeerId]];
    if (group == nil) {
      return;
    }
    
#line 214
    [self->gids_ addWithId:JavaLangInteger_valueOfWithInt_([peer getPeerId])];
    id<JavaUtilList> peers = new_JavaUtilArrayList_init();
    [peers addWithId:new_ARApiGroupOutPeer_initWithInt_withLong_([((ACGroup *) nil_chk(group)) getGroupId], [group getAccessHash])];
    [self requestWithACRequest:new_ARRequestSubscribeToGroupOnline_initWithJavaUtilList_(peers)];
  }
}


#line 222
void ACPresenceActor_onNewSessionCreated(ACPresenceActor *self) {
  
#line 225
  id<JavaUtilList> userPeers = new_JavaUtilArrayList_init();
  for (JavaLangInteger *boxed__ in nil_chk(self->uids_)) {
    jint uid = [((JavaLangInteger *) nil_chk(boxed__)) intValue];
    
#line 227
    ACUser *user = [self getUserWithInt:uid];
    if (user == nil) {
      continue;
    }
    [userPeers addWithId:new_ARApiUserOutPeer_initWithInt_withLong_(uid, [((ACUser *) nil_chk(user)) getAccessHash])];
  }
  if ([userPeers size] > 0) {
    [self requestWithACRequest:new_ARRequestSubscribeToOnline_initWithJavaUtilList_(userPeers)];
  }
  
#line 238
  id<JavaUtilList> groupPeers = new_JavaUtilArrayList_init();
  for (JavaLangInteger *boxed__ in nil_chk(self->gids_)) {
    jint gid = [((JavaLangInteger *) nil_chk(boxed__)) intValue];
    
#line 240
    ACGroup *group = [self getGroupWithInt:gid];
    if (group == nil) {
      continue;
    }
    [groupPeers addWithId:new_ARApiGroupOutPeer_initWithInt_withLong_([((ACGroup *) nil_chk(group)) getGroupId], [group getAccessHash])];
  }
  if ([groupPeers size] > 0) {
    [self requestWithACRequest:new_ARRequestSubscribeToGroupOnline_initWithJavaUtilList_(groupPeers)];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPresenceActor)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/PresenceActor.java"


#line 292
@implementation ACPresenceActor_UserOnline


#line 296
- (instancetype)initWithInt:(jint)uid
                   withLong:(jlong)updateDate {
  ACPresenceActor_UserOnline_initWithInt_withLong_(self, uid, updateDate);
  return self;
}


#line 301
- (jint)getUid {
  return uid_;
}

- (jlong)getUpdateDate {
  return updateDate_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withLong:", "UserOnline", NULL, 0x1, NULL, NULL },
    { "getUid", NULL, "I", 0x1, NULL, NULL },
    { "getUpdateDate", NULL, "J", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "uid_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "updateDate_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ACPresenceActor_UserOnline = { 2, "UserOnline", "im.actor.core.modules.internal.presence", "PresenceActor", 0x9, 3, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACPresenceActor_UserOnline;
}

@end


#line 296
void ACPresenceActor_UserOnline_initWithInt_withLong_(ACPresenceActor_UserOnline *self, jint uid, jlong updateDate) {
  (void) NSObject_init(self);
  
#line 297
  self->uid_ = uid;
  self->updateDate_ = updateDate;
}


#line 296
ACPresenceActor_UserOnline *new_ACPresenceActor_UserOnline_initWithInt_withLong_(jint uid, jlong updateDate) {
  ACPresenceActor_UserOnline *self = [ACPresenceActor_UserOnline alloc];
  ACPresenceActor_UserOnline_initWithInt_withLong_(self, uid, updateDate);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPresenceActor_UserOnline)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/PresenceActor.java"


#line 311
@implementation ACPresenceActor_UserOffline


#line 315
- (instancetype)initWithInt:(jint)uid
                   withLong:(jlong)updateDate {
  ACPresenceActor_UserOffline_initWithInt_withLong_(self, uid, updateDate);
  return self;
}


#line 320
- (jint)getUid {
  return uid_;
}

- (jlong)getUpdateDate {
  return updateDate_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withLong:", "UserOffline", NULL, 0x1, NULL, NULL },
    { "getUid", NULL, "I", 0x1, NULL, NULL },
    { "getUpdateDate", NULL, "J", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "uid_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "updateDate_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ACPresenceActor_UserOffline = { 2, "UserOffline", "im.actor.core.modules.internal.presence", "PresenceActor", 0x9, 3, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACPresenceActor_UserOffline;
}

@end


#line 315
void ACPresenceActor_UserOffline_initWithInt_withLong_(ACPresenceActor_UserOffline *self, jint uid, jlong updateDate) {
  (void) NSObject_init(self);
  
#line 316
  self->uid_ = uid;
  self->updateDate_ = updateDate;
}


#line 315
ACPresenceActor_UserOffline *new_ACPresenceActor_UserOffline_initWithInt_withLong_(jint uid, jlong updateDate) {
  ACPresenceActor_UserOffline *self = [ACPresenceActor_UserOffline alloc];
  ACPresenceActor_UserOffline_initWithInt_withLong_(self, uid, updateDate);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPresenceActor_UserOffline)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/PresenceActor.java"


#line 330
@implementation ACPresenceActor_UserLastSeen


#line 335
- (instancetype)initWithInt:(jint)uid
                    withInt:(jint)date
                   withLong:(jlong)updateDate {
  ACPresenceActor_UserLastSeen_initWithInt_withInt_withLong_(self, uid, date, updateDate);
  return self;
}


#line 341
- (jint)getUid {
  return uid_;
}

- (jint)getDate {
  return date_;
}

- (jlong)getUpdateDate {
  return updateDate_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withInt:withLong:", "UserLastSeen", NULL, 0x1, NULL, NULL },
    { "getUid", NULL, "I", 0x1, NULL, NULL },
    { "getDate", NULL, "I", 0x1, NULL, NULL },
    { "getUpdateDate", NULL, "J", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "uid_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "date_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "updateDate_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ACPresenceActor_UserLastSeen = { 2, "UserLastSeen", "im.actor.core.modules.internal.presence", "PresenceActor", 0x9, 4, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACPresenceActor_UserLastSeen;
}

@end


#line 335
void ACPresenceActor_UserLastSeen_initWithInt_withInt_withLong_(ACPresenceActor_UserLastSeen *self, jint uid, jint date, jlong updateDate) {
  (void) NSObject_init(self);
  
#line 336
  self->uid_ = uid;
  self->date_ = date;
  self->updateDate_ = updateDate;
}


#line 335
ACPresenceActor_UserLastSeen *new_ACPresenceActor_UserLastSeen_initWithInt_withInt_withLong_(jint uid, jint date, jlong updateDate) {
  ACPresenceActor_UserLastSeen *self = [ACPresenceActor_UserLastSeen alloc];
  ACPresenceActor_UserLastSeen_initWithInt_withInt_withLong_(self, uid, date, updateDate);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPresenceActor_UserLastSeen)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/PresenceActor.java"


#line 355
@implementation ACPresenceActor_GroupOnline


#line 360
- (instancetype)initWithInt:(jint)gid
                    withInt:(jint)count
                   withLong:(jlong)updateDate {
  ACPresenceActor_GroupOnline_initWithInt_withInt_withLong_(self, gid, count, updateDate);
  return self;
}


#line 366
- (jint)getGid {
  return gid_;
}

- (jint)getCount {
  return count_;
}

- (jlong)getUpdateDate {
  return updateDate_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withInt:withLong:", "GroupOnline", NULL, 0x1, NULL, NULL },
    { "getGid", NULL, "I", 0x1, NULL, NULL },
    { "getCount", NULL, "I", 0x1, NULL, NULL },
    { "getUpdateDate", NULL, "J", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "gid_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "count_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "updateDate_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ACPresenceActor_GroupOnline = { 2, "GroupOnline", "im.actor.core.modules.internal.presence", "PresenceActor", 0x9, 4, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACPresenceActor_GroupOnline;
}

@end


#line 360
void ACPresenceActor_GroupOnline_initWithInt_withInt_withLong_(ACPresenceActor_GroupOnline *self, jint gid, jint count, jlong updateDate) {
  (void) NSObject_init(self);
  
#line 361
  self->gid_ = gid;
  self->count_ = count;
  self->updateDate_ = updateDate;
}


#line 360
ACPresenceActor_GroupOnline *new_ACPresenceActor_GroupOnline_initWithInt_withInt_withLong_(jint gid, jint count, jlong updateDate) {
  ACPresenceActor_GroupOnline *self = [ACPresenceActor_GroupOnline alloc];
  ACPresenceActor_GroupOnline_initWithInt_withInt_withLong_(self, gid, count, updateDate);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPresenceActor_GroupOnline)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/PresenceActor.java"


#line 379
@implementation ACPresenceActor_OnlineUserTimeout


#line 385
- (instancetype)initWithInt:(jint)uid
                    withInt:(jint)date
                   withLong:(jlong)updateDate {
  ACPresenceActor_OnlineUserTimeout_initWithInt_withInt_withLong_(self, uid, date, updateDate);
  return self;
}


#line 391
- (jint)getUid {
  return uid_;
}

- (jint)getDate {
  return date_;
}

- (jlong)getUpdateDate {
  return updateDate_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withInt:withLong:", "OnlineUserTimeout", NULL, 0x1, NULL, NULL },
    { "getUid", NULL, "I", 0x1, NULL, NULL },
    { "getDate", NULL, "I", 0x1, NULL, NULL },
    { "getUpdateDate", NULL, "J", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "uid_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "date_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "updateDate_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ACPresenceActor_OnlineUserTimeout = { 2, "OnlineUserTimeout", "im.actor.core.modules.internal.presence", "PresenceActor", 0xa, 4, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACPresenceActor_OnlineUserTimeout;
}

@end


#line 385
void ACPresenceActor_OnlineUserTimeout_initWithInt_withInt_withLong_(ACPresenceActor_OnlineUserTimeout *self, jint uid, jint date, jlong updateDate) {
  (void) NSObject_init(self);
  
#line 386
  self->uid_ = uid;
  self->date_ = date;
  self->updateDate_ = updateDate;
}


#line 385
ACPresenceActor_OnlineUserTimeout *new_ACPresenceActor_OnlineUserTimeout_initWithInt_withInt_withLong_(jint uid, jint date, jlong updateDate) {
  ACPresenceActor_OnlineUserTimeout *self = [ACPresenceActor_OnlineUserTimeout alloc];
  ACPresenceActor_OnlineUserTimeout_initWithInt_withInt_withLong_(self, uid, date, updateDate);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPresenceActor_OnlineUserTimeout)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/PresenceActor.java"


#line 404
@implementation ACPresenceActor_Subscribe


#line 407
- (instancetype)initWithACPeer:(ACPeer *)peer {
  ACPresenceActor_Subscribe_initWithACPeer_(self, peer);
  return self;
}


#line 411
- (ACPeer *)getPeer {
  return peer_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithACPeer:", "Subscribe", NULL, 0x1, NULL, NULL },
    { "getPeer", NULL, "Lim.actor.core.entity.Peer;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "peer_", NULL, 0x2, "Lim.actor.core.entity.Peer;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ACPresenceActor_Subscribe = { 2, "Subscribe", "im.actor.core.modules.internal.presence", "PresenceActor", 0x9, 2, methods, 1, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACPresenceActor_Subscribe;
}

@end


#line 407
void ACPresenceActor_Subscribe_initWithACPeer_(ACPresenceActor_Subscribe *self, ACPeer *peer) {
  (void) NSObject_init(self);
  
#line 408
  self->peer_ = peer;
}


#line 407
ACPresenceActor_Subscribe *new_ACPresenceActor_Subscribe_initWithACPeer_(ACPeer *peer) {
  ACPresenceActor_Subscribe *self = [ACPresenceActor_Subscribe alloc];
  ACPresenceActor_Subscribe_initWithACPeer_(self, peer);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPresenceActor_Subscribe)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/PresenceActor.java"


#line 416
@implementation ACPresenceActor_SessionCreated

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ACPresenceActor_SessionCreated_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", NULL, NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcClassInfo _ACPresenceActor_SessionCreated = { 2, "SessionCreated", "im.actor.core.modules.internal.presence", "PresenceActor", 0x9, 1, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACPresenceActor_SessionCreated;
}

@end

void ACPresenceActor_SessionCreated_init(ACPresenceActor_SessionCreated *self) {
  (void) NSObject_init(self);
}

ACPresenceActor_SessionCreated *new_ACPresenceActor_SessionCreated_init() {
  ACPresenceActor_SessionCreated *self = [ACPresenceActor_SessionCreated alloc];
  ACPresenceActor_SessionCreated_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPresenceActor_SessionCreated)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/PresenceActor.java"

@implementation ACPresenceActor_$1


#line 48
- (ACPresenceActor *)create {
  return new_ACPresenceActor_initWithACModuleContext_(val$messenger_);
}

- (instancetype)initWithACModuleContext:(id<ACModuleContext>)capture$0 {
  ACPresenceActor_$1_initWithACModuleContext_(self, capture$0);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "create", NULL, "Lim.actor.core.modules.internal.presence.PresenceActor;", 0x1, NULL, NULL },
    { "initWithACModuleContext:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$messenger_", NULL, 0x1012, "Lim.actor.core.modules.ModuleContext;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "ACPresenceActor", "createWithACModuleContext:" };
  static const J2ObjcClassInfo _ACPresenceActor_$1 = { 2, "", "im.actor.core.modules.internal.presence", "PresenceActor", 0x8008, 2, methods, 1, fields, 0, NULL, 0, NULL, &enclosing_method, "Ljava/lang/Object;Lim/actor/runtime/actors/ActorCreator<Lim/actor/core/modules/internal/presence/PresenceActor;>;" };
  return &_ACPresenceActor_$1;
}

@end

void ACPresenceActor_$1_initWithACModuleContext_(ACPresenceActor_$1 *self, id<ACModuleContext> capture$0) {
  self->val$messenger_ = capture$0;
  (void) NSObject_init(self);
}

ACPresenceActor_$1 *new_ACPresenceActor_$1_initWithACModuleContext_(id<ACModuleContext> capture$0) {
  ACPresenceActor_$1 *self = [ACPresenceActor_$1 alloc];
  ACPresenceActor_$1_initWithACModuleContext_(self, capture$0);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPresenceActor_$1)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/PresenceActor.java"

@implementation ACPresenceActor_$2


#line 53
- (ARMailbox *)createMailboxWithARMailboxesQueue:(ARMailboxesQueue *)queue {
  return new_ACPresenceActor_$2_$1_initWithARMailboxesQueue_(queue);
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ACPresenceActor_$2_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "createMailboxWithARMailboxesQueue:", "createMailbox", "Lim.actor.runtime.actors.mailbox.Mailbox;", 0x1, NULL, NULL },
    { "init", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "ACPresenceActor", "createWithACModuleContext:" };
  static const J2ObjcClassInfo _ACPresenceActor_$2 = { 2, "", "im.actor.core.modules.internal.presence", "PresenceActor", 0x8008, 2, methods, 0, NULL, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_ACPresenceActor_$2;
}

@end

void ACPresenceActor_$2_init(ACPresenceActor_$2 *self) {
  (void) NSObject_init(self);
}

ACPresenceActor_$2 *new_ACPresenceActor_$2_init() {
  ACPresenceActor_$2 *self = [ACPresenceActor_$2 alloc];
  ACPresenceActor_$2_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPresenceActor_$2)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/presence/PresenceActor.java"

@implementation ACPresenceActor_$2_$1


#line 56
- (jboolean)isEqualEnvelopeWithAREnvelope:(AREnvelope *)a
                           withAREnvelope:(AREnvelope *)b {
  if ([[((AREnvelope *) nil_chk(a)) getMessage] isKindOfClass:[ACPresenceActor_OnlineUserTimeout class]] && [[((AREnvelope *) nil_chk(b)) getMessage] isKindOfClass:[ACPresenceActor_OnlineUserTimeout class]]) {
    if ([((ACPresenceActor_OnlineUserTimeout *) nil_chk(((ACPresenceActor_OnlineUserTimeout *) check_class_cast([a getMessage], [ACPresenceActor_OnlineUserTimeout class])))) getUid] == [((ACPresenceActor_OnlineUserTimeout *) nil_chk(((ACPresenceActor_OnlineUserTimeout *) check_class_cast([b getMessage], [ACPresenceActor_OnlineUserTimeout class])))) getUid]) {
      return true;
    }
  }
  return [super isEqualEnvelopeWithAREnvelope:a withAREnvelope:b];
}

- (instancetype)initWithARMailboxesQueue:(ARMailboxesQueue *)arg$0 {
  ACPresenceActor_$2_$1_initWithARMailboxesQueue_(self, arg$0);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "isEqualEnvelopeWithAREnvelope:withAREnvelope:", "isEqualEnvelope", "Z", 0x4, NULL, NULL },
    { "initWithARMailboxesQueue:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "ACPresenceActor_$2", "createMailboxWithARMailboxesQueue:" };
  static const J2ObjcClassInfo _ACPresenceActor_$2_$1 = { 2, "", "im.actor.core.modules.internal.presence", "PresenceActor$", 0x8008, 2, methods, 0, NULL, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_ACPresenceActor_$2_$1;
}

@end

void ACPresenceActor_$2_$1_initWithARMailboxesQueue_(ACPresenceActor_$2_$1 *self, ARMailboxesQueue *arg$0) {
  (void) ARMailbox_initWithARMailboxesQueue_(self, arg$0);
}

ACPresenceActor_$2_$1 *new_ACPresenceActor_$2_$1_initWithARMailboxesQueue_(ARMailboxesQueue *arg$0) {
  ACPresenceActor_$2_$1 *self = [ACPresenceActor_$2_$1 alloc];
  ACPresenceActor_$2_$1_initWithARMailboxesQueue_(self, arg$0);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPresenceActor_$2_$1)

#pragma clang diagnostic pop
