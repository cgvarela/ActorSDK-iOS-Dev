//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/push/PushRegisterActor.java
//

#include "J2ObjC_source.h"
#include "im/actor/core/api/rpc/RequestRegisterApplePush.h"
#include "im/actor/core/api/rpc/RequestRegisterGooglePush.h"
#include "im/actor/core/api/rpc/ResponseVoid.h"
#include "im/actor/core/modules/ModuleContext.h"
#include "im/actor/core/modules/internal/push/PushRegisterActor.h"
#include "im/actor/core/modules/utils/ModuleActor.h"
#include "im/actor/core/network/RpcCallback.h"
#include "im/actor/core/network/RpcException.h"
#include "im/actor/runtime/actors/Actor.h"
#include "im/actor/runtime/storage/PreferencesStorage.h"

#pragma clang diagnostic push
#pragma GCC diagnostic ignored "-Wdeprecated-declarations"

@interface ACPushRegisterActor ()

- (void)registerGooglePushWithLong:(jlong)projectId
                      withNSString:(NSString *)token;

- (void)registerApplePushWithInt:(jint)apnsId
                    withNSString:(NSString *)token;

- (void)resendPush;

@end

__attribute__((unused)) static void ACPushRegisterActor_registerGooglePushWithLong_withNSString_(ACPushRegisterActor *self, jlong projectId, NSString *token);

__attribute__((unused)) static void ACPushRegisterActor_registerApplePushWithInt_withNSString_(ACPushRegisterActor *self, jint apnsId, NSString *token);

__attribute__((unused)) static void ACPushRegisterActor_resendPush(ACPushRegisterActor *self);

@interface ACPushRegisterActor_RegisterGooglePush () {
 @public
  jlong projectId_;
  NSString *token_;
}

@end

J2OBJC_FIELD_SETTER(ACPushRegisterActor_RegisterGooglePush, token_, NSString *)

@interface ACPushRegisterActor_RegisterApplePush () {
 @public
  jint apnsKey_;
  NSString *token_;
}

@end

J2OBJC_FIELD_SETTER(ACPushRegisterActor_RegisterApplePush, token_, NSString *)

@interface ACPushRegisterActor_$1 : NSObject < ACRpcCallback > {
 @public
  ACPushRegisterActor *this$0_;
}

- (void)onResult:(ARResponseVoid *)response;

- (void)onError:(ACRpcException *)e;

- (instancetype)initWithACPushRegisterActor:(ACPushRegisterActor *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(ACPushRegisterActor_$1)

J2OBJC_FIELD_SETTER(ACPushRegisterActor_$1, this$0_, ACPushRegisterActor *)

__attribute__((unused)) static void ACPushRegisterActor_$1_initWithACPushRegisterActor_(ACPushRegisterActor_$1 *self, ACPushRegisterActor *outer$);

__attribute__((unused)) static ACPushRegisterActor_$1 *new_ACPushRegisterActor_$1_initWithACPushRegisterActor_(ACPushRegisterActor *outer$) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ACPushRegisterActor_$1)

@interface ACPushRegisterActor_$2 : NSObject < ACRpcCallback > {
 @public
  ACPushRegisterActor *this$0_;
}

- (void)onResult:(ARResponseVoid *)response;

- (void)onError:(ACRpcException *)e;

- (instancetype)initWithACPushRegisterActor:(ACPushRegisterActor *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(ACPushRegisterActor_$2)

J2OBJC_FIELD_SETTER(ACPushRegisterActor_$2, this$0_, ACPushRegisterActor *)

__attribute__((unused)) static void ACPushRegisterActor_$2_initWithACPushRegisterActor_(ACPushRegisterActor_$2 *self, ACPushRegisterActor *outer$);

__attribute__((unused)) static ACPushRegisterActor_$2 *new_ACPushRegisterActor_$2_initWithACPushRegisterActor_(ACPushRegisterActor *outer$) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ACPushRegisterActor_$2)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/push/PushRegisterActor.java"


#line 15
@implementation ACPushRegisterActor

- (instancetype)initWithACModuleContext:(id<ACModuleContext>)modules {
  ACPushRegisterActor_initWithACModuleContext_(self, modules);
  return self;
}

- (void)preStart {
  if ([((id<ARPreferencesStorage>) nil_chk([self preferences])) getBoolWithKey:@"push.google" withDefault:false]) {
    if (![((id<ARPreferencesStorage>) nil_chk([self preferences])) getBoolWithKey:@"push.google.registered" withDefault:false]) {
      jlong projectId = [((id<ARPreferencesStorage>) nil_chk([self preferences])) getLongWithKey:@"push.google.id" withDefault:0];
      NSString *token = [((id<ARPreferencesStorage>) nil_chk([self preferences])) getStringWithKey:@"push.google.token"];
      ACPushRegisterActor_registerGooglePushWithLong_withNSString_(self, projectId, token);
    }
  }
  if ([((id<ARPreferencesStorage>) nil_chk([self preferences])) getBoolWithKey:@"push.apple" withDefault:false]) {
    if (![((id<ARPreferencesStorage>) nil_chk([self preferences])) getBoolWithKey:@"push.apple.registered" withDefault:false]) {
      jint apnsId = [((id<ARPreferencesStorage>) nil_chk([self preferences])) getIntWithKey:@"push.apple.id" withDefault:0];
      NSString *token = [((id<ARPreferencesStorage>) nil_chk([self preferences])) getStringWithKey:@"push.apple.token"];
      ACPushRegisterActor_registerApplePushWithInt_withNSString_(self, apnsId, token);
    }
  }
}

- (void)registerGooglePushWithLong:(jlong)projectId
                      withNSString:(NSString *)token {
  ACPushRegisterActor_registerGooglePushWithLong_withNSString_(self, projectId, token);
}


#line 58
- (void)registerApplePushWithInt:(jint)apnsId
                    withNSString:(NSString *)token {
  ACPushRegisterActor_registerApplePushWithInt_withNSString_(self, apnsId, token);
}


#line 77
- (void)resendPush {
  ACPushRegisterActor_resendPush(self);
}


#line 95
- (void)onReceiveWithId:(id)message {
  if ([message isKindOfClass:[ACPushRegisterActor_RegisterGooglePush class]]) {
    ACPushRegisterActor_RegisterGooglePush *registerGooglePush = (ACPushRegisterActor_RegisterGooglePush *) check_class_cast(message, [ACPushRegisterActor_RegisterGooglePush class]);
    ACPushRegisterActor_registerGooglePushWithLong_withNSString_(self, [((ACPushRegisterActor_RegisterGooglePush *) nil_chk(registerGooglePush)) getProjectId],
#line 99
    [registerGooglePush getToken]);
  }
  else
#line 100
  if ([message isKindOfClass:[ACPushRegisterActor_RegisterApplePush class]]) {
    ACPushRegisterActor_RegisterApplePush *applePush = (ACPushRegisterActor_RegisterApplePush *) check_class_cast(message, [ACPushRegisterActor_RegisterApplePush class]);
    ACPushRegisterActor_registerApplePushWithInt_withNSString_(self, [((ACPushRegisterActor_RegisterApplePush *) nil_chk(applePush)) getApnsKey], [applePush getToken]);
  }
  else
#line 103
  if ([message isKindOfClass:[ACPushRegisterActor_ResendPush class]]) {
    ACPushRegisterActor_resendPush(self);
  }
  else {
    
#line 106
    [self dropWithId:message];
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithACModuleContext:", "PushRegisterActor", NULL, 0x1, NULL, NULL },
    { "preStart", NULL, "V", 0x1, NULL, NULL },
    { "registerGooglePushWithLong:withNSString:", "registerGooglePush", "V", 0x2, NULL, NULL },
    { "registerApplePushWithInt:withNSString:", "registerApplePush", "V", 0x2, NULL, NULL },
    { "resendPush", NULL, "V", 0x2, NULL, NULL },
    { "onReceiveWithId:", "onReceive", "V", 0x1, NULL, NULL },
  };
  static const char *inner_classes[] = {"Lim.actor.core.modules.internal.push.PushRegisterActor$RegisterGooglePush;", "Lim.actor.core.modules.internal.push.PushRegisterActor$RegisterApplePush;", "Lim.actor.core.modules.internal.push.PushRegisterActor$ResendPush;"};
  static const J2ObjcClassInfo _ACPushRegisterActor = { 2, "PushRegisterActor", "im.actor.core.modules.internal.push", NULL, 0x1, 6, methods, 0, NULL, 0, NULL, 3, inner_classes, NULL, NULL };
  return &_ACPushRegisterActor;
}

@end


#line 17
void ACPushRegisterActor_initWithACModuleContext_(ACPushRegisterActor *self, id<ACModuleContext> modules) {
  (void) ACModuleActor_initWithACModuleContext_(self, modules);
}


#line 17
ACPushRegisterActor *new_ACPushRegisterActor_initWithACModuleContext_(id<ACModuleContext> modules) {
  ACPushRegisterActor *self = [ACPushRegisterActor alloc];
  ACPushRegisterActor_initWithACModuleContext_(self, modules);
  return self;
}


#line 39
void ACPushRegisterActor_registerGooglePushWithLong_withNSString_(ACPushRegisterActor *self, jlong projectId, NSString *token) {
  [((id<ARPreferencesStorage>) nil_chk([self preferences])) putBoolWithKey:@"push.google" withValue:true];
  [((id<ARPreferencesStorage>) nil_chk([self preferences])) putBoolWithKey:@"push.google.registered" withValue:false];
  [((id<ARPreferencesStorage>) nil_chk([self preferences])) putLongWithKey:@"push.google.id" withValue:projectId];
  [((id<ARPreferencesStorage>) nil_chk([self preferences])) putStringWithKey:@"push.google.token" withValue:token];
  
#line 45
  [self requestWithACRequest:new_ARRequestRegisterGooglePush_initWithLong_withNSString_(projectId, token) withACRpcCallback:new_ACPushRegisterActor_$1_initWithACPushRegisterActor_(self)];
}


#line 58
void ACPushRegisterActor_registerApplePushWithInt_withNSString_(ACPushRegisterActor *self, jint apnsId, NSString *token) {
  [((id<ARPreferencesStorage>) nil_chk([self preferences])) putBoolWithKey:@"push.apple" withValue:true];
  [((id<ARPreferencesStorage>) nil_chk([self preferences])) putBoolWithKey:@"push.apple.registered" withValue:false];
  [((id<ARPreferencesStorage>) nil_chk([self preferences])) putIntWithKey:@"push.apple.id" withValue:apnsId];
  [((id<ARPreferencesStorage>) nil_chk([self preferences])) putStringWithKey:@"push.apple.token" withValue:token];
  
#line 64
  [self requestWithACRequest:new_ARRequestRegisterApplePush_initWithInt_withNSString_(apnsId, token) withACRpcCallback:new_ACPushRegisterActor_$2_initWithACPushRegisterActor_(self)];
}


#line 77
void ACPushRegisterActor_resendPush(ACPushRegisterActor *self) {
  if ([((id<ARPreferencesStorage>) nil_chk([self preferences])) getBoolWithKey:@"push.google" withDefault:false]) {
    [((id<ARPreferencesStorage>) nil_chk([self preferences])) putBoolWithKey:@"push.google.registered" withValue:false];
    
#line 81
    jlong projectId = [((id<ARPreferencesStorage>) nil_chk([self preferences])) getLongWithKey:@"push.google.id" withDefault:0];
    NSString *token = [((id<ARPreferencesStorage>) nil_chk([self preferences])) getStringWithKey:@"push.google.token"];
    ACPushRegisterActor_registerGooglePushWithLong_withNSString_(self, projectId, token);
  }
  if ([((id<ARPreferencesStorage>) nil_chk([self preferences])) getBoolWithKey:@"push.apple" withDefault:false]) {
    [((id<ARPreferencesStorage>) nil_chk([self preferences])) putBoolWithKey:@"push.apple.registered" withValue:false];
    
#line 88
    jint apnsId = [((id<ARPreferencesStorage>) nil_chk([self preferences])) getIntWithKey:@"push.apple.id" withDefault:0];
    NSString *token = [((id<ARPreferencesStorage>) nil_chk([self preferences])) getStringWithKey:@"push.apple.token"];
    ACPushRegisterActor_registerApplePushWithInt_withNSString_(self, apnsId, token);
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPushRegisterActor)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/push/PushRegisterActor.java"


#line 110
@implementation ACPushRegisterActor_RegisterGooglePush


#line 114
- (instancetype)initWithLong:(jlong)projectId
                withNSString:(NSString *)token {
  ACPushRegisterActor_RegisterGooglePush_initWithLong_withNSString_(self, projectId, token);
  return self;
}


#line 119
- (jlong)getProjectId {
  return projectId_;
}

- (NSString *)getToken {
  return token_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithLong:withNSString:", "RegisterGooglePush", NULL, 0x1, NULL, NULL },
    { "getProjectId", NULL, "J", 0x1, NULL, NULL },
    { "getToken", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "projectId_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "token_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ACPushRegisterActor_RegisterGooglePush = { 2, "RegisterGooglePush", "im.actor.core.modules.internal.push", "PushRegisterActor", 0x9, 3, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACPushRegisterActor_RegisterGooglePush;
}

@end


#line 114
void ACPushRegisterActor_RegisterGooglePush_initWithLong_withNSString_(ACPushRegisterActor_RegisterGooglePush *self, jlong projectId, NSString *token) {
  (void) NSObject_init(self);
  
#line 115
  self->projectId_ = projectId;
  self->token_ = token;
}


#line 114
ACPushRegisterActor_RegisterGooglePush *new_ACPushRegisterActor_RegisterGooglePush_initWithLong_withNSString_(jlong projectId, NSString *token) {
  ACPushRegisterActor_RegisterGooglePush *self = [ACPushRegisterActor_RegisterGooglePush alloc];
  ACPushRegisterActor_RegisterGooglePush_initWithLong_withNSString_(self, projectId, token);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPushRegisterActor_RegisterGooglePush)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/push/PushRegisterActor.java"


#line 128
@implementation ACPushRegisterActor_RegisterApplePush


#line 132
- (instancetype)initWithInt:(jint)apnsKey
               withNSString:(NSString *)token {
  ACPushRegisterActor_RegisterApplePush_initWithInt_withNSString_(self, apnsKey, token);
  return self;
}


#line 137
- (jint)getApnsKey {
  return apnsKey_;
}

- (NSString *)getToken {
  return token_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withNSString:", "RegisterApplePush", NULL, 0x1, NULL, NULL },
    { "getApnsKey", NULL, "I", 0x1, NULL, NULL },
    { "getToken", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "apnsKey_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "token_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ACPushRegisterActor_RegisterApplePush = { 2, "RegisterApplePush", "im.actor.core.modules.internal.push", "PushRegisterActor", 0x9, 3, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACPushRegisterActor_RegisterApplePush;
}

@end


#line 132
void ACPushRegisterActor_RegisterApplePush_initWithInt_withNSString_(ACPushRegisterActor_RegisterApplePush *self, jint apnsKey, NSString *token) {
  (void) NSObject_init(self);
  
#line 133
  self->apnsKey_ = apnsKey;
  self->token_ = token;
}


#line 132
ACPushRegisterActor_RegisterApplePush *new_ACPushRegisterActor_RegisterApplePush_initWithInt_withNSString_(jint apnsKey, NSString *token) {
  ACPushRegisterActor_RegisterApplePush *self = [ACPushRegisterActor_RegisterApplePush alloc];
  ACPushRegisterActor_RegisterApplePush_initWithInt_withNSString_(self, apnsKey, token);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPushRegisterActor_RegisterApplePush)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/push/PushRegisterActor.java"


#line 146
@implementation ACPushRegisterActor_ResendPush

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ACPushRegisterActor_ResendPush_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", NULL, NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcClassInfo _ACPushRegisterActor_ResendPush = { 2, "ResendPush", "im.actor.core.modules.internal.push", "PushRegisterActor", 0x9, 1, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_ACPushRegisterActor_ResendPush;
}

@end

void ACPushRegisterActor_ResendPush_init(ACPushRegisterActor_ResendPush *self) {
  (void) NSObject_init(self);
}

ACPushRegisterActor_ResendPush *new_ACPushRegisterActor_ResendPush_init() {
  ACPushRegisterActor_ResendPush *self = [ACPushRegisterActor_ResendPush alloc];
  ACPushRegisterActor_ResendPush_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPushRegisterActor_ResendPush)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/push/PushRegisterActor.java"

@implementation ACPushRegisterActor_$1


#line 47
- (void)onResult:(ARResponseVoid *)response {
  [((id<ARPreferencesStorage>) nil_chk([this$0_ preferences])) putBoolWithKey:@"push.google.registered" withValue:true];
}


#line 52
- (void)onError:(ACRpcException *)e {
}

- (instancetype)initWithACPushRegisterActor:(ACPushRegisterActor *)outer$ {
  ACPushRegisterActor_$1_initWithACPushRegisterActor_(self, outer$);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "onResult:", "onResult", "V", 0x1, NULL, NULL },
    { "onError:", "onError", "V", 0x1, NULL, NULL },
    { "initWithACPushRegisterActor:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lim.actor.core.modules.internal.push.PushRegisterActor;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "ACPushRegisterActor", "registerGooglePushWithLong:withNSString:" };
  static const J2ObjcClassInfo _ACPushRegisterActor_$1 = { 2, "", "im.actor.core.modules.internal.push", "PushRegisterActor", 0x8008, 3, methods, 1, fields, 0, NULL, 0, NULL, &enclosing_method, "Ljava/lang/Object;Lim/actor/core/network/RpcCallback<Lim/actor/core/api/rpc/ResponseVoid;>;" };
  return &_ACPushRegisterActor_$1;
}

@end

void ACPushRegisterActor_$1_initWithACPushRegisterActor_(ACPushRegisterActor_$1 *self, ACPushRegisterActor *outer$) {
  self->this$0_ = outer$;
  (void) NSObject_init(self);
}

ACPushRegisterActor_$1 *new_ACPushRegisterActor_$1_initWithACPushRegisterActor_(ACPushRegisterActor *outer$) {
  ACPushRegisterActor_$1 *self = [ACPushRegisterActor_$1 alloc];
  ACPushRegisterActor_$1_initWithACPushRegisterActor_(self, outer$);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPushRegisterActor_$1)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/core/core-shared/src/main/java//im/actor/core/modules/internal/push/PushRegisterActor.java"

@implementation ACPushRegisterActor_$2


#line 66
- (void)onResult:(ARResponseVoid *)response {
  [((id<ARPreferencesStorage>) nil_chk([this$0_ preferences])) putBoolWithKey:@"push.apple.registered" withValue:true];
}


#line 71
- (void)onError:(ACRpcException *)e {
}

- (instancetype)initWithACPushRegisterActor:(ACPushRegisterActor *)outer$ {
  ACPushRegisterActor_$2_initWithACPushRegisterActor_(self, outer$);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "onResult:", "onResult", "V", 0x1, NULL, NULL },
    { "onError:", "onError", "V", 0x1, NULL, NULL },
    { "initWithACPushRegisterActor:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lim.actor.core.modules.internal.push.PushRegisterActor;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "ACPushRegisterActor", "registerApplePushWithInt:withNSString:" };
  static const J2ObjcClassInfo _ACPushRegisterActor_$2 = { 2, "", "im.actor.core.modules.internal.push", "PushRegisterActor", 0x8008, 3, methods, 1, fields, 0, NULL, 0, NULL, &enclosing_method, "Ljava/lang/Object;Lim/actor/core/network/RpcCallback<Lim/actor/core/api/rpc/ResponseVoid;>;" };
  return &_ACPushRegisterActor_$2;
}

@end

void ACPushRegisterActor_$2_initWithACPushRegisterActor_(ACPushRegisterActor_$2 *self, ACPushRegisterActor *outer$) {
  self->this$0_ = outer$;
  (void) NSObject_init(self);
}

ACPushRegisterActor_$2 *new_ACPushRegisterActor_$2_initWithACPushRegisterActor_(ACPushRegisterActor *outer$) {
  ACPushRegisterActor_$2 *self = [ACPushRegisterActor_$2 alloc];
  ACPushRegisterActor_$2_initWithACPushRegisterActor_(self, outer$);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ACPushRegisterActor_$2)

#pragma clang diagnostic pop
