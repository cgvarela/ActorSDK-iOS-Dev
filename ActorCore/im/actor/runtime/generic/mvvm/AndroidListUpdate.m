//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/runtime/runtime-generic/src/main/java//im/actor/runtime/generic/mvvm/AndroidListUpdate.java
//

#include "J2ObjC_source.h"
#include "im/actor/runtime/generic/mvvm/AndroidListUpdate.h"
#include "im/actor/runtime/generic/mvvm/ChangeDescription.h"
#include "java/util/ArrayList.h"

#pragma clang diagnostic push
#pragma GCC diagnostic ignored "-Wdeprecated-declarations"

@interface ARAndroidListUpdate () {
 @public
  JavaUtilArrayList *list_;
  JavaUtilArrayList *changes_;
  jboolean isLoadMore_;
}

@end

J2OBJC_FIELD_SETTER(ARAndroidListUpdate, list_, JavaUtilArrayList *)
J2OBJC_FIELD_SETTER(ARAndroidListUpdate, changes_, JavaUtilArrayList *)

#line 0 "/Users/ex3ndr/Develop/actor-proprietary/actor-sdk/sdk-core/runtime/runtime-generic/src/main/java//im/actor/runtime/generic/mvvm/AndroidListUpdate.java"


#line 9
@implementation ARAndroidListUpdate


#line 15
- (instancetype)initWithJavaUtilArrayList:(JavaUtilArrayList *)list
                    withJavaUtilArrayList:(JavaUtilArrayList *)changes
                              withBoolean:(jboolean)isLoadMore {
  ARAndroidListUpdate_initWithJavaUtilArrayList_withJavaUtilArrayList_withBoolean_(self, list, changes, isLoadMore);
  return self;
}


#line 21
- (jint)getSize {
  return [((JavaUtilArrayList *) nil_chk(list_)) size];
}

- (id)getItemWithInt:(jint)index {
  return [((JavaUtilArrayList *) nil_chk(list_)) getWithInt:index];
}

- (jboolean)isLoadMore {
  return isLoadMore_;
}

- (ARChangeDescription *)next {
  if ([((JavaUtilArrayList *) nil_chk(changes_)) size] == 0) {
    return nil;
  }
  ARChangeDescription *res = [changes_ removeWithInt:0];
  {
    
#line 40
    jint addIndex;
    
#line 46
    jint updateIndex;
    
#line 54
    id itm;
    
#line 58
    jint removeIndex;
    
#line 38
    switch ([[((ARChangeDescription *) nil_chk(res)) getOperationType] ordinal]) {
      case ARChangeDescription_OperationType_ADD:
      addIndex = [res getIndex];
      for (id __strong itm in nil_chk([res getItems])) {
        [((JavaUtilArrayList *) nil_chk(list_)) addWithInt:addIndex++ withId:itm];
      }
      break;
      case ARChangeDescription_OperationType_UPDATE:
      updateIndex = [res getIndex];
      for (id __strong itm in nil_chk([res getItems])) {
        jint index = updateIndex++;
        (void) [((JavaUtilArrayList *) nil_chk(list_)) removeWithInt:index];
        [list_ addWithInt:index withId:itm];
      }
      break;
      case ARChangeDescription_OperationType_MOVE:
      itm = [((JavaUtilArrayList *) nil_chk(list_)) removeWithInt:[res getIndex]];
      [list_ addWithInt:[res getDestIndex] withId:itm];
      break;
      case ARChangeDescription_OperationType_REMOVE:
      removeIndex = [res getIndex];
      for (jint i = 0; i < [res getLength]; i++) {
        (void) [((JavaUtilArrayList *) nil_chk(list_)) removeWithInt:removeIndex];
      }
      break;
    }
  }
  
#line 64
  return res;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithJavaUtilArrayList:withJavaUtilArrayList:withBoolean:", "AndroidListUpdate", NULL, 0x1, NULL, NULL },
    { "getSize", NULL, "I", 0x1, NULL, NULL },
    { "getItemWithInt:", "getItem", "TT;", 0x1, NULL, "(I)TT;" },
    { "isLoadMore", NULL, "Z", 0x1, NULL, NULL },
    { "next", NULL, "Lim.actor.runtime.generic.mvvm.ChangeDescription;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "list_", NULL, 0x2, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<TT;>;", .constantValue.asLong = 0 },
    { "changes_", NULL, 0x2, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lim/actor/runtime/generic/mvvm/ChangeDescription<TT;>;>;", .constantValue.asLong = 0 },
    { "isLoadMore_", NULL, 0x2, "Z", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ARAndroidListUpdate = { 2, "AndroidListUpdate", "im.actor.runtime.generic.mvvm", NULL, 0x1, 5, methods, 3, fields, 0, NULL, 0, NULL, NULL, "<T:Ljava/lang/Object;>Ljava/lang/Object;" };
  return &_ARAndroidListUpdate;
}

@end


#line 15
void ARAndroidListUpdate_initWithJavaUtilArrayList_withJavaUtilArrayList_withBoolean_(ARAndroidListUpdate *self, JavaUtilArrayList *list, JavaUtilArrayList *changes, jboolean isLoadMore) {
  (void) NSObject_init(self);
  
#line 16
  self->list_ = new_JavaUtilArrayList_initWithJavaUtilCollection_(list);
  self->changes_ = changes;
  self->isLoadMore_ = isLoadMore;
}


#line 15
ARAndroidListUpdate *new_ARAndroidListUpdate_initWithJavaUtilArrayList_withJavaUtilArrayList_withBoolean_(JavaUtilArrayList *list, JavaUtilArrayList *changes, jboolean isLoadMore) {
  ARAndroidListUpdate *self = [ARAndroidListUpdate alloc];
  ARAndroidListUpdate_initWithJavaUtilArrayList_withJavaUtilArrayList_withBoolean_(self, list, changes, isLoadMore);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ARAndroidListUpdate)

#pragma clang diagnostic pop
